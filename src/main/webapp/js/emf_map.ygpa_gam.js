OpenLayers.ProxyHost="proxy?url=";function removeWindow(a){a.remove()}window.removeWindow=removeWindow;
var DeleteFeature=new OpenLayers.Class(OpenLayers.Control,{initialize:function(a,e){OpenLayers.Control.prototype.initialize.apply(this,[e]);this.layer=a;this.handler=new OpenLayers.Handler.Feature(this,a,{click:this.clickFeature})},clickFeature:function(a){void 0==a.fid?this.layer.destroyFeatures([a]):(a.state=OpenLayers.State.DELETE,this.layer.events.triggerEvent("afterfeaturemodified",{feature:a}),a.renderIntent="select",this.layer.drawFeature(a))},setMap:function(a){this.handler.setMap(a);OpenLayers.Control.prototype.setMap.apply(this,
arguments)},CLASS_NAME:"OpenLayers.Control.DeleteFeature"}),EMD=function(a,e,p,q){return{go:function(){for(var a in EMD.init)EMD.init[a]()},window_seq:0,win_x:80,win_y:40,userinfo:null,popupCaller:null,popupId:null,map:null,wfs:null,lotarea:null,panel:null,draw:null,edit:null,edit_win:null,del:null,info:null,save:null,saveStrategy:null,transaction:{type:null,callbackWindowId:null},map_panel:null,userLayer:{landCode:null,prtFclty:null},selectControl:null,maxBounds:new OpenLayers.Bounds(-180,-90,180,
90),maxRes:0.0439453125,maxZoom:19,module_instance:[],init:{frame_breaker:function(){e.location!==e.top.location&&(e.top.location=e.location)},clock:function(){var d=a("#clock");if(d.length){var b=new Date,c=b.getHours(),e=b.getMinutes(),h=b.getDate(),l=b.getFullYear(),k="AM",m,p;m="\uc77c\uc6d4\ud654\uc218\ubaa9\uae08\ud1a0".split("");p="1\uc6d4 2\uc6d4 3\uc6d4 4\uc6d4 5\uc6d4 6\uc6d4 7\uc6d4 8\uc6d4 9\uc6d4 10\uc6d4 11\uc6d4 12\uc6d4".split(" ");m=m[b.getDay()];p=p[b.getMonth()];12<=c&&(k="PM");
12<c?c-=12:0===c&&(c=12);10>e&&(e="0"+e);b=p+" "+h+", "+l;d.html(m+" "+c+":"+e+" "+k).attr("title",b);setTimeout(EMD.init.clock,6E4)}},desktop:function(){var d=a(p);d.mousedown(function(b){a(b.target).is("a.menu_trigger")||a(b.target).is("a")||a(b.target).is("button")||a(b.target).is("input")||a(b.target).is("select")||a(b.target).is("textarea")||a(b.target).is("tr")||(EMD.util.clear_active(),b.preventDefault(),b.stopPropagation())});d.on("contextmenu",function(){return!1});d.on("click","a",function(b){var c=
a(this).attr("href");this.blur();"LoadModule"==a(this).data("role")&&EMD.util.create_window(a(this).text(),a(this).data("url"));c.match(/^#/)?(b.preventDefault(),b.stopPropagation()):a(this).attr("target","_blank")});d.on("mousedown","a.menu_trigger",function(){a(this).next("ul.menu").is(":hidden")?(EMD.util.clear_active(),a(this).addClass("active").next("ul.menu").show()):EMD.util.clear_active()});d.on("mouseenter","a.menu_trigger",function(){a("ul.menu").is(":visible")&&(EMD.util.clear_active(),
a(this).addClass("active").next("ul.menu").show())});d.on("mousedown","a.icon",function(){EMD.util.clear_active();a(this).addClass("active")});d.on("dblclick","a.icon",function(){var b=a(this).attr("href"),c=a(b).find("a").attr("href");a(b).is(":hidden")&&(a(b).remove().appendTo("#dock"),a(b).show("fast"));EMD.util.window_flat();a(c).addClass("window_stack").show()});d.on("mouseenter","a.icon",function(){a(this).off("mouseenter").draggable({revert:!0,containment:"parent"})});d.on("click","#dock a",
function(){var b=a(a(this).attr("href"));b.is(":visible")?a("#desktop").show():(EMD.util.window_flat(),b.show().addClass("window_stack"))});d.on("mousedown","div.window",function(){EMD.util.window_flat();a(this).addClass("window_stack")});d.on("mouseenter","div.window",function(){a(this).off("mouseenter").draggable({cancel:"a",containment:"div.olForeignContainer",handle:"div.window_top"}).resizable({containment:"div.olForeignContainer",minWidth:400,minHeight:200})});d.on("dblclick","div.window_top",
function(){EMD.util.window_resize(this)});d.on("dblclick","div.window_top img",function(){a(a(this).closest("div.window_top").find("a.window_close").attr("href")).hide("fast");a(this).closest("div.window").hide();return!1});d.on("click","a.window_min",function(){var b=a(this).closest("div.window").attr("href"),c=b.replace("window","dock");a("#"+b).effect("transfer",{to:"#"+c,className:".ui-effects-transfer"},500,function(){a("#"+win).hide()})});d.on("click","a.window_resize",function(){EMD.util.window_resize(this)});
d.on("click","a.window_close",function(){EMD.util.window_close(a(this))});d.on("mousedown","#show_desktop",function(){a("div.window:visible").length?a("div.window").hide():a("#dock li:visible a").each(function(){a(a(this).attr("href")).show()})});a("table.data").each(function(){a(this).find("tbody tr:odd").addClass("zebra")});d.on("mousedown","table.data tr",function(){EMD.util.clear_active();a(this).closest("tr").addClass("active")});d.on("mouseenter","#cat_menu",function(){a(this).addClass("showCategoryMenu",
1E3)});d.on("mouseout","#cat_menu",function(){setTimeOut(function(){a(this).removeClass("showCategoryMenu",1E3)})})},wallpaper:function(){a("#desktop")},map_init:function(){EMD.map=new OpenLayers.Map({div:"desktop",projection:"ESPG:4326",maxExtents:EMD.maxBounds,numZoomLevels:EMD.maxZoom,maxResolution:EMD.maxRes});var a=new OpenLayers.Layer.Google("Google Streets",{numZoomLevels:20});new OpenLayers.Layer.Google("Google Hybrid",{type:google.maps.MapTypeId.HYBRID,numZoomLevels:20});var b=new OpenLayers.Layer.Google("Google Satellite",
{type:google.maps.MapTypeId.SATELLITE,numZoomLevels:22});EMD.lotarea=new OpenLayers.Control.GetFeature({protocol:new OpenLayers.Protocol.WFS({version:"1.1.0",url:"http://map.vworld.kr/js/wfs.do?APIKEY=5E7D605D-BD5A-3BEE-8C20-62172A86B4AA&DOMAIN=localhost&SERVICE=WFS&REQUEST=GetFeature&TYPENAME=LP_PA_CBND_BUBUN&SRSNAME=EPSG:900913",featureType:"LP_PA_CBND_BUBUN",featurePrefix:"LP",SRSNAME:"EPSG:900913"}),box:!0,hover:!0,multipleKey:"shiftKey",toggleKey:"ctrlKey"});new OpenLayers.Strategy.Save;EMD.userLayer.prtFclty=
new OpenLayers.Layer.Vector("Port Facility Layer",{fillColor:"#073EC9",fillOpacity:0.8,strokeColor:"#414141",strokeOpacity:1,strokeWidth:3,pointRadius:6,pointerEvents:"visiblePainted",styleMap:new OpenLayers.StyleMap({"default":{strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,fillColor:"#303294",fillOpacity:0.5,pointRadius:6,pointerEvents:"visiblePainted",label:"\uc2dc\uc124\ucf54\ub4dc: ${fcltyCd}\n\uc2dc\uc124\uba85: ${name}\n\n\uc18d\uc131: ${type}",fontColor:"${favColor}",fontSize:"12px",
fontFamily:"Courier New, monospace",fontWeight:"bold",labelAlign:"cm",labelXOffset:"${xOffset}",labelYOffset:"${yOffset}",labelOutlineColor:"white",labelOutlineWidth:3},select:{strokeColor:"#00FF00",strokeOpacity:1,strokeWidth:3,fillColor:"#303294",fillOpacity:1,pointRadius:6,pointerEvents:"visiblePainted",label:"\uc2dc\uc124\ucf54\ub4dc: ${fcltyCd}\n\uc2dc\uc124\uba85: ${name}\n\n\uc18d\uc131: ${type}",fontColor:"${favColor}",fontSize:"12px",fontFamily:"Courier New, monospace",fontWeight:"bold",
labelAlign:"cm",labelXOffset:"${xOffset}",labelYOffset:"${yOffset}",labelOutlineColor:"white",labelOutlineWidth:3}}),renderers:OpenLayers.Layer.Vector.prototype.renderers});EMD.selectControl=new OpenLayers.Control.SelectFeature(EMD.userLayer.prtFclty,{clickout:!0,toggle:!1,multiple:!0,hover:!1,toggleKey:"ctrlKey",multipleKey:"shiftKey"});EMD.userLayer.prtFclty.events.register("featureselected",null,function(a){a=a.feature;var b=new OpenLayers.Popup.FramedCloud("popup",OpenLayers.LonLat.fromString(a.geometry.toShortString()),
null,"<div style='font-size:.8em'>ID: "+a.id+"<br>\uc2dc\uc124\ucf54\ub4dc: "+a.attributes.fcltyCd+"<br> \uc2dc\uc124\uba85 : "+a.attributes.name+"</div>",null,!0);a.popup=b;EMD.map.addPopup(b)});EMD.userLayer.prtFclty.events.register("featureunselected",null,function(a){a=a.feature;map.removePopup(a.popup);a.popup.destroy();a.popup=null});EMD.wfs=new OpenLayers.Layer.Vector("Vector Layer");EMD.wfs.setVisibility(!0);EMD.userLayer.prtFclty.setVisibility(!0);EMD.panel=new OpenLayers.Control.Panel({displayClass:"customEditingToolbar",
allowDepress:!0});EMD.map.addLayers([b,a,EMD.userLayer.prtFclty,EMD.wfs]);EMD.draw=new OpenLayers.Control.DrawFeature(EMD.wfs,OpenLayers.Handler.Polygon,{title:"\ucd94\uac00",displayClass:"olControlDrawFeaturePolygon",multi:!0});EMD.edit=new OpenLayers.Control.ModifyFeature(EMD.wfs,{title:"\uc218\uc815",displayClass:"olControlModifyFeature"});EMD.del=new DeleteFeature(EMD.wfs,{title:"\uc0ad\uc81c"});EMD.save=new OpenLayers.Control.Button({title:"\uc800\uc7a5",trigger:function(){EMD.edit.feature&&
EMD.edit.selectControl.unselectAll();EMD.saveStrategy.save()},displayClass:"olControlSaveFeatures"});EMD.panel.addControls([EMD.save,EMD.del,EMD.edit,EMD.draw]);EMD.map.addControl(EMD.panel);EMD.map.addControl(EMD.selectControl);EMD.selectControl.activate();EMD.map.addControl(EMD.lotarea);EMD.map.addControl(new OpenLayers.Control.LayerSwitcher);EMD.map.addControl(new OpenLayers.Control.MousePosition({prefix:"\uc88c\ud45c : ",separator:" | ",numDigits:6,displayProjection:new OpenLayers.Projection("EPSG:900913")}));
EMD.map.addControl(new OpenLayers.Control.Scale);EMD.map.setCenter(new OpenLayers.LonLat(14213430,4147543),13)},ui_init:function(){a("#sideMenu").sidr("open","sidr-main")}},util:{addCommas:function(a){x=(a+"").split(".");x1=x[0];x2=1<x.length?"."+x[1]:"";for(a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1,$2");return x1+x2},clear_active:function(){a("a.active, tr.active").removeClass("active");a("ul.menu").hide()},create_window:function(d,b){var c="#window_"+EMD.window_seq,e="#dock_"+EMD.window_seq;
EMD.window_seq++;var h=p.createElement("li");h.id=e.substring(1);h.innerHTML='<a href="'+c+'">'+d+"</a>";a("#dock")[0].appendChild(h);e=p.createElement("div");e.id=c.substring(1);e.style.display="none";e.innerHTML='<div class="abs window_inner"><div class="window_top"><span class="float_left">'+d+'</span> <span class="float_right"> <a href="#" class="window_min"></a><a href="#" class="window_resize"></a> <a href="#'+e.id+'" class="window_close"></a></span></div><div class="abs window_content"></div></div><div class="abs window_bottom ">\uc5ec\uc218\uad11\uc591\ud56d\ub9cc\uacf5\uc0ac ver : 2013.12.19.01</div><span class="abs ui-resizable-handle ui-resizable-se"></span>';
a("#desktop")[0].appendChild(e);a(c).addClass("abs");a(c).addClass("window");b!=q&&a(c+" .window_content").load(b,{window_id:c.substring(1),"choices[]":["prtCd","data"]},function(b,c,d){if("error"==c)alert("\uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uc5d0\ub7ec\ubc88\ud638: "+d.status+" "+d.statusText);else if(b=a("#window_id").val(),b==q)alert("\uc11c\ubc84 \uc624\ub958\ub85c \uc778\ud558\uc5ec \ud398\uc774\uc9c0\ub97c \ub85c\ub4dc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");else{c=1*
b.substring(b.lastIndexOf("_")+1);a("#window_id").remove();a("#"+b)[0].module=module_instance;module_instance.setWindowId(c);EMD.module_instance[c]=module_instance;module_instance.setWindowId(b);EMD.util.modify_window(b);var e,h,u;d=EMD.win_x;e=EMD.win_y;h=EMD.module_instance[c].getWidth();u=EMD.module_instance[c].getHeight();a(p).height()-48<e+u&&(e=a(p).height()-u-28,20>e&&(e=20));a(p).width()<d+h&&(d=0);EMD.util.window_move(b,d,e);EMD.win_x=d+30;EMD.win_y=e+30;380<EMD.win_x&&(EMD.win_x=80,EMD.win_y=
40);EMD.util.window_size(b,h,u);EMD.module_instance[c].loadComplete();EMD.util.window_flat();a("#"+b).addClass("window_stack").show("drop",{},600);EMD.util.clear_active()}})},window_flat:function(){a("div.window").removeClass("window_stack")},window_move:function(d,b,c){a("#"+d).css({left:b,top:c})},window_size:function(d,b,c){a("#"+d).css({width:b,height:c})},window_resize:function(d){d=a(d).closest("div.window");d.hasClass("window_full")?d.removeClass("window_full").css({top:d.attr("data-t"),left:d.attr("data-l"),
right:d.attr("data-r"),bottom:d.attr("data-b"),width:d.attr("data-w"),height:d.attr("data-h")}):d.attr({"data-t":d.css("top"),"data-l":d.css("left"),"data-r":d.css("right"),"data-b":d.css("bottom"),"data-w":d.css("width"),"data-h":d.css("height")}).addClass("window_full").css({top:"0",left:"0",right:"0",bottom:"0",width:"100%",height:"100%"});EMD.util.window_flat();d.addClass("window_stack")},window_hide_all:function(){a("div.window").each(function(){a(this).effect("transfer",{to:"#dock_"+a(this).attr(id),
className:".ui-effects-transfer"},500,function(){a(this).removeAttr("style").hide()})})},window_hide:function(d){var b=d.attr("href").replace("window","dock");a(this).effect("transfer",{to:"#"+b,className:".ui-effects-transfer"},500,function(){a("#"+d).removeAttr("style").hide()})},window_close:function(d){var b=d.attr("href").replace("window","dock");a(d.attr("href")).hide("explode",{},1E3,function(){a(this).remove()});a(b).hide("fast");a(b).remove()},save_feature:function(){},edit_feature:function(a,
b){b==q&&null==b||EMD.wfs.addFeatures(b);EMD.edit_win=a},select:function(a){},modify_id:function(d,b){b.children().length&&b.children().each(function(){0<a(this).children().length&&EMD.util.modify_id(d,a(this));a(this).attr("id")!=q&&a(this).attr("id",d+"_"+a(this).attr("id"));a(this).attr("data-grid")!=q&&a(this).attr("data-grid",d+"_"+a(this).attr("id"))})},modify_window:function(d){var b=a("#"+d);EMD.util.modify_id(d,a("#"+d));b.data("_win_id",d);b.resize(function(){b.find(".window_main").each(function(){a(this).css("height",
b.height()-54)})});b.find(".emdTabPanel").data("_win_id",d);b.find(".emdTabPanel").each(function(){a(this).find(".emdTab").data("_win_id",a(this).data("_win_id"));a(this).find(".emdTab").each(function(){a(this).attr("href",a(this).attr("href").replace("#","#"+a(this).data("_win_id")+"_"))});a(this).tabs({activate:function(b,d){var e=a(this).data("onchange"),l=d.oldPanel.attr("id").replace(a(this).closest(".window").data("_win_id")+"_",""),k=d.newPanel.attr("id").replace(a(this).closest(".window").data("_win_id")+
"_","");a(this).closest(".window")[0].module[e](k,l)},select:function(a,b){currentTab=b.index},nextTab:function(b){currentTab=currentTab<a(this).tabs("length")-1?currentTab+1:0}})});b.find(".viewStack").each(function(){a(this).changeViewId=function(b){a(this)._viewStackId=b;a(this).find(".viewPanel").each(function(b){b!=a(this).parent(".viewStack")._viewStackId?a(this).css("display","none"):a(this).css("display","block")})};a(this).find(".viewPanel").each(function(b){0!=b?a(this).css("display","none"):
a(this).css("background","red")});a(this)[0].changePanelId=function(b){a(this).find(".viewPanel").each(function(d){d==b?a(this).css("display","block"):a(this).css("display","none")})}});b.find("button").each(function(){var c=null==a(this).attr("id")||a(this).attr("id").length<d.length+1?a(this).attr("class"):a(this).attr("id").substring(d.length+1);a(this).click({module:b[0].module,button_id:c},function(b){b.preventDefault();if("loadMap"==b.data.button_id)b.data.module.showMap(a(this).attr("data-grid"));
else b.data.module.onButtonClick(b.data.button_id)})});a("#"+d).find(".emdcal").each(function(){a(this).datepicker({showOn:"button",dateFormat:"yymmdd",prevText:"\uc774\uc804 \ub2ec",nextText:"\ub2e4\uc74c \ub2ec",monthNames:"1\uc6d4 2\uc6d4 3\uc6d4 4\uc6d4 5\uc6d4 6\uc6d4 7\uc6d4 8\uc6d4 9\uc6d4 10\uc6d4 11\uc6d4 12\uc6d4".split(" "),monthNamesShort:"1\uc6d4 2\uc6d4 3\uc6d4 4\uc6d4 5\uc6d4 6\uc6d4 7\uc6d4 8\uc6d4 9\uc6d4 10\uc6d4 11\uc6d4 12\uc6d4".split(" "),dayNames:"\uc77c\uc6d4\ud654\uc218\ubaa9\uae08\ud1a0".split(""),
dayNamesShort:"\uc77c\uc6d4\ud654\uc218\ubaa9\uae08\ud1a0".split(""),dayNamesMin:"\uc77c\uc6d4\ud654\uc218\ubaa9\uae08\ud1a0".split(""),changeMonth:!0,changeYear:!0})})}}}}(jQuery,this,this.document);function EmdModule(a,e){this._selectedRow=this._window_id=this._parent=null;void 0==a||null==a||void 0==e||null==e?(this._width=720,this._height=480):(this._width=a,this._height=e)}EmdModule.prototype.setParent=function(a){this._parent=a};
EmdModule.prototype.showMap=function(a){void 0!=a&&(this._selectedRow=$("#"+a).selectedRows());EMD.transactionWindow=this._window_id;EMD.util.window_hide_all()};EmdModule.prototype.getSelect=function(a){alert("get select = "+this._window_id+" "+a)};EmdModule.prototype.showAlert=function(a){alert("alert id = "+this._window_id+" "+a)};EmdModule.prototype.setWindowId=function(a){this._window_id=a;this._window=$(a)};EmdModule.prototype.getWindowId=function(){return this._window_id};
EmdModule.prototype.getWidth=function(){return this._width};EmdModule.prototype.setWidth=function(a){this._width=a};EmdModule.prototype.getHeight=function(){return this._height};EmdModule.prototype.setHeight=function(a){this._height=a};EmdModule.prototype.buttonClick=function(a){alert("button "+a+" is clicked")};EmdModule.prototype.setSelectedRow=function(a){this._selectedRow=a};EmdModule.prototype.getSelectedRow=function(){return this._selectedRow};
EmdModule.prototype.$=function(a){return $("#"+this._window_id).find(a.replace("#","#"+this._window_id+"_"))};EmdModule.prototype.makeFormArgs=function(a){var e=[],p=this._window_id;this.$(a).find(":input").each(function(){var a=$(this).attr("id");"string"==typeof a&&(a=a.replace(p+"_",""),e[e.length]={name:a,value:$(this).val()})});return e};
EmdModule.prototype.doAction=function(a,e,p){$.ajax({url:a,type:"POST",module:this,dataType:"json",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:e}).done(function(a){null!=p&&p(this.module,a)})};
EmdModule.prototype.doExecuteDialog=function(a,e,p,q){if(0==$("#__dialog-modal").length){var d=document.createElement("div");d.style.display="none";d.innerHTML='<div id="__dialog-modal"></div>';$("#desktop")[0].appendChild(d)}EMD.popupcaller=this;EMD.popupId=a;void 0!=p&&$("#__dialog-modal").load(p,q,function(a,c,d){"error"==c?alert("\uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uc5d0\ub7ec\ubc88\ud638: "+d.status+" "+d.statusText):(a=popup_instance.getWidth(),c=popup_instance.getHeight(),
$("#__dialog-modal").dialog({width:a,height:c,modal:!0,closeOnEscape:!0,title:e}),popup_instance.setDialog($("#__dialog-modal")),popup_instance.setPopupCaller(EMD.popupcaller),popup_instance.setPopupId(EMD.popupId),$("#__dialog-modal").find("button").each(function(){$(this).click({module:popup_instance,button_id:$(this).attr("id")},function(a){a.preventDefault();a.data.module.onButtonClick(a.data.button_id)})}),popup_instance.loadComplete())})};
function EmdPopupModule(a,e){this._returnValue=this._popupId=this._popupCaller=null;void 0==a||null==a||void 0==e||null==e?(this._width=720,this._height=480):(this._width=a,this._height=e);this.module=null}EmdPopupModule.prototype.setDialog=function(a){this._dialog=a};EmdPopupModule.prototype.getDialog=function(a){return this._dialog};EmdPopupModule.prototype.setPopupCaller=function(a){this._popupCaller=a};EmdPopupModule.prototype.onClosePopup=function(a,e,p){alert("close dialog "+a)};
EmdPopupModule.prototype.setPopupId=function(a){this._popupId=a};EmdPopupModule.prototype.getWidth=function(){return this._width};EmdPopupModule.prototype.setWidth=function(a){this._width=a};EmdPopupModule.prototype.getHeight=function(){return this._height};EmdPopupModule.prototype.setHeight=function(a){this._height=a};EmdPopupModule.prototype.onButtonClick=function(a){alert("button "+a+" is clicked")};
EmdPopupModule.prototype.resizable=function(a){this._dialog.dialog("option","resizable")!=a&&this._dialog.dialog("option","resizable",a)};EmdPopupModule.prototype.makeFormArgs=function(a){var e=[];this.$(a).find(":input").each(function(){var a=$(this).attr("id");"string"==typeof a&&(e[e.length]={name:a,value:$(this).val()})});return e};EmdPopupModule.prototype.closeDialog=function(a,e){this._dialog.dialog("destroy");this._popupCaller.onClosePopup(this._popupId,a,e)};
EmdPopupModule.prototype.cancelDialog=function(){this._dialog.dialog("destroy");this._popupCaller.onClosePopup(this._popupId,"cancel",null)};EmdPopupModule.prototype.$=function(a){return $("#__dialog-modal").find(a)};jQuery(document).ready(function(){EMD.go()});(function(a){var e=a.browser;if(!e){var p=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}}(navigator.userAgent),e={};p.browser&&(e[p.browser]=!0,e.version=p.version);e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)}"function"!=typeof a.support.selectstart&&(a.support.selectstart=
"onselectstart"in document.createElement("div"));"function"!=typeof a.fn.disableSelection&&(a.fn.disableSelection=function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})});a.addFlex=function(d,b){if(d.grid)return!1;b=a.extend({module:null,height:"auto",width:"auto",striped:!0,novstripe:!1,minwidth:30,minheight:80,resizable:!1,url:!1,method:"POST",dataType:"json",errormsg:"\uc11c\ubc84\uc5d0 \uc5f0\uacb0 \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",
usepager:!0,nowrap:!0,pageIndex:1,totalCount:1,useRp:!1,rp:15,rpOptions:[10,15,20,30,50],title:!1,idProperty:"id",pagestat:"{totalCount} \uc911 {from} \ubd80\ud130 {to} \uae4c\uc9c0 \ud45c\uc2dc \ub428",pagetext:"\ud398\uc774\uc9c0",outof:"of",findtext:"\ucc3e\uae30",params:[],procmsg:"\uc11c\ubc84\uc758 \uc751\ub2f5\uc744 \uae30\ub2e4\ub9ac\ub294 \uc911\uc785\ub2c8\ub2e4...",query:"",qtype:"",nomsg:"\uc870\ud68c\ub41c \ud56d\ubaa9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.",minColToggle:1,showToggleBtn:!0,
singleSelect:!0,hideOnSubmit:!0,autoload:!1,blockOpacity:0.5,preProcess:!1,addTitleToCell:!1,dblClickResize:!1,onDragCol:!1,onToggleCol:!1,onChangeSort:!1,onDoubleClick:!1,onSuccess:!1,onError:!1,onSubmit:!1,__mw:{datacol:function(a,b,c){b="function"==typeof a.datacol[b]?a.datacol[b](c):c;return"function"==typeof a.datacol["*"]?a.datacol["*"](b):b}},getGridClass:function(a){return a},datacol:{},colResize:!0,colMove:!0},b);a(d).show().attr({cellPadding:0,cellSpacing:0,border:0}).removeAttr("width");
var c={hset:{},rePosDrag:function(){var f=0-this.hDiv.scrollLeft;0<this.hDiv.scrollLeft&&(f-=Math.floor(b.cgwidth/2));a(c.cDrag).css({top:c.hDiv.offsetTop+1});var d=this.cdpad,g=0;a("div",c.cDrag).hide();a("thead tr:first th:visible",this.hDiv).each(function(){var t=a("thead tr:first th:visible",c.hDiv).index(this),r=parseInt(a("div",this).width());0==f&&(f-=Math.floor(b.cgwidth/2));r=r+f+d;isNaN(r)&&(r=0);a("div:eq("+t+")",c.cDrag).css({left:(e.mozilla?r:r-g)+"px"}).show();f=r;g++})},fixHeight:function(f){f=
!1;f=a(c.bDiv).height();var d=a(this.hDiv).height();a("div",this.cDrag).each(function(){a(this).height(f+d)});parseInt(a(c.nDiv).height(),10)>f?a(c.nDiv).height(f).width(200):a(c.nDiv).height("auto").width("auto");a(c.block).css({height:f,marginBottom:-1*f});var e=c.bDiv.offsetTop+f;"auto"!=b.height&&b.resizable&&(e=c.vDiv.offsetTop);a(c.rDiv).css({height:e})},dragStart:function(f,d,g){if("colresize"==f&&!0===b.colResize){a(c.nDiv).hide();a(c.nBtn).hide();f=a("div",this.cDrag).index(g);var t=a("th:visible div:eq("+
f+")",this.hDiv).width();a(g).addClass("dragging").siblings().hide();a(g).prev().addClass("dragging").show();this.colresize={startX:d.pageX,ol:parseInt(g.style.left,10),ow:t,n:f};a("body").css("cursor","col-resize")}else"vresize"==f?(f=!1,a("body").css("cursor","row-resize"),g&&(f=!0,a("body").css("cursor","col-resize")),this.vresize={h:b.height,sy:d.pageY,w:b.width,sx:d.pageX,hgo:f}):"colMove"==f&&(a(d.target).disableSelection(),!0===b.colMove&&(a(c.nDiv).hide(),a(c.nBtn).hide(),this.hset=a(this.hDiv).offset(),
this.hset.right=this.hset.left+a("table",this.hDiv).width(),this.hset.bottom=this.hset.top+a("table",this.hDiv).height(),this.dcol=g,this.dcoln=a("th",this.hDiv).index(g),this.colCopy=document.createElement("div"),this.colCopy.className="colCopy",this.colCopy.innerHTML=g.innerHTML,e.msie&&(this.colCopy.className="colCopy ie"),a(this.colCopy).css({position:"absolute","float":"left",display:"none",textAlign:g.align}),a("body").append(this.colCopy),a(this.cDrag).hide()));a("body").noSelect()},dragMove:function(c){if(this.colresize){var d=
this.colresize.n,e=c.pageX-this.colresize.startX;c=this.colresize.ol+e;e=this.colresize.ow+e;e>b.minwidth&&(a("div:eq("+d+")",this.cDrag).css("left",c),this.colresize.nw=e)}else this.vresize?(d=this.vresize,e=c.pageY-d.sy,b.defwidth||(b.defwidth=b.width),"auto"!=b.width&&!b.nohresize&&d.hgo&&(c=d.w+(c.pageX-d.sx),c>b.defwidth&&(this.gDiv.style.width=c+"px",b.width=c)),e=d.h+e,(e>b.minheight||b.height<b.minheight)&&!d.hgo&&(this.bDiv.style.height=e+"px",b.height=e,this.fixHeight(e))):this.colCopy&&
(a(this.dcol).addClass("thMove").removeClass("thOver"),c.pageX>this.hset.right||c.pageX<this.hset.left||c.pageY>this.hset.bottom||c.pageY<this.hset.top?a("body").css("cursor","move"):a("body").css("cursor","pointer"),a(this.colCopy).css({top:c.pageY+10,left:c.pageX+20,display:"block"}))},dragEnd:function(){if(this.colresize){var f=this.colresize.n,d=this.colresize.nw;a("th:visible div:eq("+f+")",this.hDiv).css("width",d);a("tr",this.bDiv).each(function(){var b=a("td:visible div:eq("+f+")",this);b.css("width",
d);c.addTitleToCell(b)});this.hDiv.scrollLeft=this.bDiv.scrollLeft;a("div:eq("+f+")",this.cDrag).siblings().show();a(".dragging",this.cDrag).removeClass("dragging");this.rePosDrag();this.fixHeight();this.colresize=!1;a.cookies&&a.cookie("flexiwidths/"+b.colModel[f].name,d)}else if(this.vresize)this.vresize=!1;else if(this.colCopy){a(this.colCopy).remove();if(null!==this.dcolt&&(this.dcoln>this.dcolt?a("th:eq("+this.dcolt+")",this.hDiv).before(this.dcol):a("th:eq("+this.dcolt+")",this.hDiv).after(this.dcol),
this.switchCol(this.dcoln,this.dcolt),a(this.cdropleft).remove(),a(this.cdropright).remove(),this.rePosDrag(),b.onDragCol))b.onDragCol(this.dcoln,this.dcolt);this.colCopy=this.dcolt=this.dcoln=this.hset=this.dcol=null;a(".thMove",this.hDiv).removeClass("thMove");a(this.cDrag).show()}a("body").css("cursor","default");a("body").noSelect(!1)},toggleCol:function(f,e){var g=a("th[axis='col"+f+"']",this.hDiv)[0],t=a("thead th",c.hDiv).index(g),r=a("input[value="+f+"]",c.nDiv)[0];null==e&&(e=g.hidden);if(a("input:checked",
c.nDiv).length<b.minColToggle&&!e)return!1;e?(g.hidden=!1,a(g).show(),r.checked=!0):(g.hidden=!0,a(g).hide(),r.checked=!1);a("tbody tr",d).each(function(){e?a("td:eq("+t+")",this).show():a("td:eq("+t+")",this).hide()});this.rePosDrag();if(b.onToggleCol)b.onToggleCol(f,e);return e},switchCol:function(b,c){a("tbody tr",d).each(function(){b>c?a("td:eq("+c+")",this).before(a("td:eq("+b+")",this)):a("td:eq("+c+")",this).after(a("td:eq("+b+")",this))});b>c?a("tr:eq("+c+")",this.nDiv).before(a("tr:eq("+
b+")",this.nDiv)):a("tr:eq("+c+")",this.nDiv).after(a("tr:eq("+b+")",this.nDiv));e.msie&&7>e.version&&(a("tr:eq("+c+") input",this.nDiv)[0].checked=!0);this.hDiv.scrollLeft=this.bDiv.scrollLeft},scroll:function(){this.hDiv.scrollLeft=this.bDiv.scrollLeft;this.rePosDrag()},addData:function(f){b.preProcess&&(f=b.preProcess(b.module,f));a(".pReload",this.pDiv).removeClass("loading");this.loading=!1;if(!f){a(".pPageStat",this.pDiv).html(b.errormsg);if(b.onSuccess)b.onSuccess(this);return!1}b.totalCount=
"xml"==b.dataType?+a("rows total",f).text():f.totalCount;if(0===b.totalCount){a("tr, a, td, div",d).unbind();a(d).empty();b.pages=1;b.pageIndex=1;this.buildpager();a(".pPageStat",this.pDiv).html(b.nomsg);if(b.onSuccess)b.onSuccess(this);return!1}b.pages=Math.ceil(b.totalCount/b.rp);b.pageIndex="xml"==b.dataType?+a("rows page",f).text():f.searchOption.pageIndex;this.buildpager();var n=document.createElement("tbody");if("json"==b.dataType)a.each(f.resultList,function(f,d){var e=document.createElement("tr"),
g=a(e);d.name&&(e.name=d.name);d.color?g.css("background",d.color):f%2&&b.striped&&(e.className="erow");d[b.idProperty]&&(e.id="row"+d[b.idProperty],g.attr("data-id",d[b.idProperty]));a("thead tr:first th",c.hDiv).each(function(){var c=document.createElement("td"),n=a(this).attr("axis").substr(3);c.align=this.align;if("undefined"==typeof d.cell){var g=d[b.colModel[n].name];if(void 0!=b.colModel[n].displayFormat)switch(b.colModel[n].displayFormat){case "number":g=EMD.util.addCommas(g);break;case "select":for(var g=
'<SELECT name="'+b.colModel[n].name+"_"+f+'">',h=0;h<b.colModel[n].displayOption.length;h++)g=g+'<OPTION value="'+b.colModel[n].displayOption[h].value+'"'+(b.colModel[n].displayOption.value==d[b.colModel[n].name]?"selected":"")+">"+b.colModel[n].displayOption[h].name+"</OPTION>";g+="</SELECT>";break;case "button":null==b.colModel[n].displayOption?g='<BUTTON name="'+b.colModel[n].name+"_"+f+'"></BUTTON>':(g='<BUTTON name="'+b.colModel[n].name+"_"+f+'"',void 0!=b.colModel[n].displayOption.className&&
(g=g+' class="'+b.colModel[n].displayOption.className+'"'),g+=">",void 0!=b.colModel[n].displayOption.label&&(g+=b.colModel[n].displayOption.label),g+="</BUTTON>");break;case "checkbox":null==b.colModel[n].displayOption?g='<INPUT type="checkbox" name="'+b.colModel[n].name+"_"+f+'" />':(g='<INPUT type="checkbox" name="'+b.colModel[n].name+"_"+f+'"',void 0!=b.colModel[n].displayOption.className&&(g=g+' class="'+b.colModel[n].displayOption.className+'"'),g+=" />",void 0!=b.colModel[n].displayOption.label&&
(g+=b.colModel[n].displayOption.label))}c.innerHTML=g}else{g="undefined"!=typeof d.cell[n]?null!==d.cell[n]?d.cell[n]:"":d.cell[b.colModel[n].name];if(void 0!=b.colModel[n].displayFormat)switch(b.colModel[n].displayFormat){case "number":g=EMD.util.addCommas(g)}c.innerHTML=b.__mw.datacol(b,a(this).attr("abbr"),g)}n=c.innerHTML.indexOf("<BGCOLOR=");0<n&&a(c).css("background",text.substr(n+7,7));a(c).attr("abbr",a(this).attr("abbr"));a(e).append(c)});if(1>a("thead",this.gDiv).length)for(idx=0;idx<d.cell.length;idx++)g=
document.createElement("td"),g.innerHTML="undefined"!=typeof d.cell[idx]?null!=d.cell[idx]?d.cell[idx]:"":d.cell[b.colModel[idx].name],a(e).append(g),g=null;a(n).append(e);e=null});else if("xml"==b.dataType){var g=1;a("rows row",f).each(function(){g++;var d=document.createElement("tr");a(this).attr("name")&&(d.name=a(this).attr("name"));a(this).attr("color")?a(d).css("background",a(this).attr("id")):g%2&&b.striped&&(d.className="erow");var f=a(this).attr("id");f&&(d.id="row"+f);var f=null,e=this;
a("thead tr:first th",c.hDiv).each(function(){var c=document.createElement("td"),f=a(this).attr("axis").substr(3);c.align=this.align;var f=a("cell:eq("+f+")",e).text(),n=f.indexOf("<BGCOLOR=");0<n&&a(c).css("background",f.substr(n+7,7));c.innerHTML=b.__mw.datacol(b,a(this).attr("abbr"),f);a(c).attr("abbr",a(this).attr("abbr"));a(d).append(c)});1>a("thead",this.gDiv).length&&a("cell",this).each(function(){var b=document.createElement("td");b.innerHTML=a(this).text();a(d).append(b)});a(n).append(d);
e=d=null})}a("tr",d).unbind();a(d).empty();a(d).append(n);this.addCellProp();this.addRowProp();this.rePosDrag();a(n).find("select").change({result:f.resultList,p:b,g:c},function(b){b.preventDefault();var c=a(this).attr("name").lastIndexOf("_"),d=1*a(this).attr("name").substring(c+1);b.data.result[d][a(this).attr("name").substring(0,c)]=a(this).val();a(this).closest("table").trigger("onSelectChanged",[b.data.p.module,b.data.result[d],b.data.g,b.data.p])});a(n).find(":button").on("click",{result:f.resultList,
p:b,g:c},function(b){b.preventDefault();var c=a(this).attr("name").lastIndexOf("_"),c=1*a(this).attr("name").substring(c+1);a(this).closest("table").trigger("onButtonClicked",[b.data.p.module,b.data.result[c],b.data.g,b.data.p])});a(n).find("input:checkbox").on("change",{result:f.resultList,p:b,g:c},function(b){b.preventDefault();var c=a(this).attr("name").lastIndexOf("_"),d=1*a(this).attr("name").substring(c+1),f=a(this).is(":checked");b.data.result[d][a(this).attr("name").substring(0,c)]=f;a(this).closest("table").trigger("onCheckBoxChanged",
[b.data.p.module,b.data.result[d],b.data.g,b.data.p])});g=f=n=null;if(b.onSuccess)b.onSuccess(this);b.hideOnSubmit&&a(c.block).remove();this.hDiv.scrollLeft=this.bDiv.scrollLeft;e.opera&&a(d).css("visibility","visible")},changeSort:function(d){if(this.loading)return!0;a(c.nDiv).hide();a(c.nBtn).hide();b.sortname==a(d).attr("abbr")&&(b.sortorder="asc"==b.sortorder?"desc":"asc");a(d).addClass("sorted").siblings().removeClass("sorted");a(".sdesc",this.hDiv).removeClass("sdesc");a(".sasc",this.hDiv).removeClass("sasc");
a("div",d).addClass("s"+b.sortorder);b.sortname=a(d).attr("abbr");if(b.onChangeSort)b.onChangeSort(b.sortname,b.sortorder);else this.populate()},buildpager:function(){a(".pcontrol input",this.pDiv).val(b.pageIndex);a(".pcontrol span",this.pDiv).html(b.pages);var c=(b.pageIndex-1)*b.rp+1,d=c+b.rp-1;b.totalCount<d&&(d=b.totalCount);var e=b.pagestat,e=e.replace(/{from}/,c),e=e.replace(/{to}/,d),e=e.replace(/{totalCount}/,b.totalCount);a(".pPageStat",this.pDiv).html(e)},populate:function(){if(this.loading)return alert("\ub370\uc774\ud130\ub97c \ub85c\ub529\uc911\uc785\ub2c8\ub2e4. \uc7a5\uc2dc\uac04 \uc5f0\uacb0 \ub418\uc9c0 \uc54a\uc744 \uacbd\uc6b0 \ucc3d\uc744 \ub2eb\uace0 \ub2e4\uc2dc \uc2e4\ud589 \ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."),
!0;if(b.onSubmit&&!b.onSubmit())return!1;this.loading=!0;if(!b.url)return!1;a(".pPageStat",this.pDiv).html(b.procmsg);a(".pReload",this.pDiv).addClass("loading");a(c.block).css({top:c.bDiv.offsetTop});b.hideOnSubmit&&a(this.gDiv).prepend(c.block);e.opera&&a(d).css("visibility","hidden");b.newp||(b.newp=1);b.pageIndex>b.pages&&(b.pageIndex=b.pages);var f=[{name:"pageIndex",value:b.newp},{name:"recordCountPerPage",value:b.rp},{name:"sortname",value:b.sortname},{name:"sortorder",value:b.sortorder},{name:"query",
value:b.query},{name:"qtype",value:b.qtype}];if(b.params.length)for(var n=0;n<b.params.length;n++)f[f.length]=b.params[n];a.ajax({type:b.method,url:b.url,data:f,dataType:b.dataType,success:function(a){c.addData(a)},error:function(a,c,d){try{if(b.onError)b.onError(a,c,d)}catch(f){}}})},doSearch:function(){b.query=a("input[name=q]",c.sDiv).val();b.qtype=a("select[name=qtype]",c.sDiv).val();b.newp=1;this.populate()},changePage:function(c){if(this.loading)return!0;switch(c){case "first":b.newp=1;break;
case "prev":1<b.pageIndex&&(b.newp=parseInt(b.pageIndex,10)-1);break;case "next":b.pageIndex<b.pages&&(b.newp=parseInt(b.pageIndex,10)+1);break;case "last":b.newp=b.pages;break;case "input":c=parseInt(a(".pcontrol input",this.pDiv).val(),10),isNaN(c)&&(c=1),1>c?c=1:c>b.pages&&(c=b.pages),a(".pcontrol input",this.pDiv).val(c),b.newp=c}if(b.newp==b.pageIndex)return!1;if(b.onChangePage)b.onChangePage(b.newp);else this.populate()},addCellProp:function(){a("tbody tr td",c.bDiv).each(function(){var d=document.createElement("div"),
e=a("td",a(this).parent()).index(this),e=a("th:eq("+e+")",c.hDiv).get(0);null!=e&&(b.sortname==a(e).attr("abbr")&&b.sortname&&(this.className="sorted"),a(d).css({textAlign:e.align,width:a("div:first",e)[0].style.width}),e.hidden&&a(this).css("display","none"));!1==b.nowrap&&a(d).css("white-space","normal");""==this.innerHTML&&(this.innerHTML="&nbsp;");d.innerHTML=this.innerHTML;var g=a(this).parent()[0],h=!1;g.id&&(h=g.id.substr(3));null!=e&&e.process&&e.process(d,h);a(this).empty().append(d).removeAttr("width");
c.addTitleToCell(d)})},getCellDim:function(b){var c=parseInt(a(b).height(),10),d=parseInt(a(b).parent().height(),10),e=parseInt(b.style.width,10),h=parseInt(a(b).parent().width(),10),k=b.offsetParent.offsetTop,l=b.offsetParent.offsetLeft,m=parseInt(a(b).css("paddingLeft"),10);b=parseInt(a(b).css("paddingTop"),10);return{ht:c,wt:e,top:k,left:l,pdl:m,pdt:b,pht:d,pwt:h}},addRowProp:function(){a("tbody tr",c.bDiv).on("click",function(d){var e=d.target||d.srcElement;if(e.href||e.type)return!0;if(!d.ctrlKey&&
!d.metaKey){a(this).toggleClass("trSelected");var g=[];a.each(this.cells,function(a,b){var c=b.abbr,d=b.firstChild.innerHTML;"&nbsp;"==d&&(d="");g[c]=d});a(this).hasClass("trSelected")?a(this).closest("table").trigger("onItemSelected",[b.module,g,c,b]):a(this).closest("table").trigger("onItemUnSelected",[b.module,g,c,b]);b.singleSelect&&!c.multisel&&a(this).siblings().removeClass("trSelected")}}).on("mousedown",function(b){b.shiftKey&&(a(this).toggleClass("trSelected"),c.multisel=!0,this.focus(),
a(c.gDiv).noSelect());if(b.ctrlKey||b.metaKey)a(this).toggleClass("trSelected"),c.multisel=!0,this.focus()}).on("mouseup",function(b){!c.multisel||b.ctrlKey||b.metaKey||(c.multisel=!1,a(c.gDiv).noSelect(!1))}).on("dblclick",function(d){var e={},g=this.cells;a("thead tr:first th",c.hDiv).each(function(){var b=a(this).attr("abbr"),c=g[this.cellIndex].firstChild.innerHTML;"&nbsp;"==c&&(c="");null!=b&&""!=b||alert("column error : column value is "+c);e[b]=c});a(this).closest("table").trigger("onItemDoubleClick",
[b.module,e,c,b])}).hover(function(b){c.multisel&&b.shiftKey&&a(this).toggleClass("trSelected")},function(){});e.msie&&7>e.version&&a(this).hover(function(){a(this).addClass("trOver")},function(){a(this).removeClass("trOver")})},combo_flag:!0,combo_resetIndex:function(a){this.combo_flag&&(a.selectedIndex=0);this.combo_flag=!0},combo_doSelectAction:function(a){eval(a.options[a.selectedIndex].value);a.selectedIndex=0;this.combo_flag=!1},addTitleToCell:function(c){if(b.addTitleToCell){var d=a("<span />").css("display",
"none");c=c instanceof jQuery?c:a(c);var e=c.outerWidth(),h=0;a("body").children(":first").before(d);d.html(c.html());d.css("font-size",""+c.css("font-size"));d.css("padding-left",""+c.css("padding-left"));h=d.innerWidth();d.remove();h>e?c.attr("title",c.text()):c.removeAttr("title")}},autoResizeColumn:function(d){if(b.dblClickResize){var e=a("div",this.cDrag).index(d),g=a("th:visible div:eq("+e+")",this.hDiv);d=parseInt(d.style.left,10);var h=g.width(),k=0,l=0,m=a("<span />");a("body").children(":first").before(m);
m.html(g.html());m.css("font-size",""+g.css("font-size"));m.css("padding-left",""+g.css("padding-left"));m.css("padding-right",""+g.css("padding-right"));k=m.width();a("tr",this.bDiv).each(function(){var b=a("td:visible div:eq("+e+")",this),c=0;m.html(b.html());m.css("font-size",""+b.css("font-size"));m.css("padding-left",""+b.css("padding-left"));m.css("padding-right",""+b.css("padding-right"));c=m.width();k=c>k?c:k});m.remove();k=b.minWidth>k?b.minWidth:k;l=d+(k-h);a("div:eq("+e+")",this.cDrag).css("left",
l);this.colresize={nw:k,n:e};c.dragEnd()}},pager:0},c=b.getGridClass(c);if(b.colModel){for(var p=document.createElement("thead"),h=document.createElement("tr"),l=0;l<b.colModel.length;l++){var k=b.colModel[l],m=document.createElement("th");a(m).attr("axis","col"+l);if(k){if(a.cookies){var q="flexiwidths/"+k.name;void 0!=a.cookie(q)&&(k.width=a.cookie(q))}void 0!=k.display&&(m.innerHTML=k.display);k.name&&a(m).attr("abbr",k.name);k.align&&(m.align=k.align);k.width&&a(m).attr("width",k.width);a(k).attr("hide")&&
(m.hidden=!0);k.process&&(m.process=k.process)}else m.innerHTML="",a(m).attr("width",30);a(h).append(m)}a(p).append(h);a(d).prepend(p)}c.gDiv=document.createElement("div");c.mDiv=document.createElement("div");c.hDiv=document.createElement("div");c.bDiv=document.createElement("div");c.vDiv=document.createElement("div");c.rDiv=document.createElement("div");c.cDrag=document.createElement("div");c.block=document.createElement("div");c.nDiv=document.createElement("div");c.nBtn=document.createElement("div");
c.iDiv=document.createElement("div");c.tDiv=document.createElement("div");c.sDiv=document.createElement("div");c.pDiv=document.createElement("div");!1===b.colResize&&a(c.cDrag).css("display","none");b.usepager||(c.pDiv.style.display="none");c.hTable=document.createElement("table");c.gDiv.className="flexigrid";"auto"!=b.width&&(c.gDiv.style.width=b.width+(isNaN(b.width)?"":"px"));e.msie&&a(c.gDiv).addClass("ie");b.novstripe&&a(c.gDiv).addClass("novstripe");a(d).before(c.gDiv);a(c.gDiv).append(d);if(b.buttons){c.tDiv.className=
"tDiv";m=document.createElement("div");m.className="tDiv2";for(l=0;l<b.buttons.length;l++)h=b.buttons[l],h.separator?a(m).append("<div class='btnseparator'></div>"):(k=document.createElement("div"),k.className="fbutton",k.innerHTML="<div><span>"+(h.hidename?"&nbsp;":h.name)+"</span></div>",h.bclass&&a("span",k).addClass(h.bclass).css({paddingLeft:20}),h.bimage&&a("span",k).css("background","url("+h.bimage+") no-repeat center left"),a("span",k).css("paddingLeft",20),h.tooltip&&(a("span",k)[0].title=
h.tooltip),k.onpress=h.onpress,k.name=h.name,h.id&&(k.id=h.id),h.onpress&&a(k).click(function(){this.onpress(this.id||this.name,c.gDiv)}),a(m).append(k),e.msie&&7>e.version&&a(k).hover(function(){a(this).addClass("fbOver")},function(){a(this).removeClass("fbOver")}));a(c.tDiv).append(m);a(c.tDiv).append("<div style='clear:both'></div>");a(c.gDiv).prepend(c.tDiv)}c.hDiv.className="hDiv";if(b.combobuttons&&a(c.tDiv2)){k=document.createElement("div");k.className="fbutton";var s=document.createElement("select");
a(s).change(function(){c.combo_doSelectAction(s)});a(s).click(function(){c.combo_resetIndex(s)});s.className="cselect";a(k).append(s);for(l=0;l<b.combobuttons.length;l++)h=b.combobuttons[l],h.separator||(m=document.createElement("option"),m.innerHTML=h.name,h.bclass&&a(m).addClass(h.bclass).css({paddingLeft:20}),h.bimage&&a(m).css("background","url("+h.bimage+") no-repeat center left"),a(m).css("paddingLeft",20),h.tooltip&&(a(m)[0].title=h.tooltip),h.onpress&&(m.value=h.onpress),a(s).append(m));a(".tDiv2").append(k)}a(d).before(c.hDiv);
c.hTable.cellPadding=0;c.hTable.cellSpacing=0;a(c.hDiv).append('<div class="hDivBox"></div>');a("div",c.hDiv).append(c.hTable);var p=a("thead:first",d).get(0);p&&a(c.hTable).append(p);p=null;if(!b.colmodel)var y=0;a("thead tr:first th",c.hDiv).each(function(){var d=document.createElement("div");a(this).attr("abbr")&&(a(this).click(function(b){if(!a(this).hasClass("thOver"))return!1;b=b.target||b.srcElement;if(b.href||b.type)return!0;c.changeSort(this)}),a(this).attr("abbr")==b.sortname&&(this.className=
"sorted",d.className="s"+b.sortorder));this.hidden&&a(this).hide();b.colmodel||a(this).attr("axis","col"+y++);""==this.width&&(this.width=100);a(d).css({textAlign:this.align,width:this.width+"px"});d.innerHTML=this.innerHTML;a(this).empty().append(d).removeAttr("width").mousedown(function(a){c.dragStart("colMove",a,this)}).hover(function(){c.colresize||a(this).hasClass("thMove")||c.colCopy||a(this).addClass("thOver");if(a(this).attr("abbr")!=b.sortname&&!c.colCopy&&!c.colresize&&a(this).attr("abbr"))a("div",
this).addClass("s"+b.sortorder);else if(a(this).attr("abbr")==b.sortname&&!c.colCopy&&!c.colresize&&a(this).attr("abbr")){var d="asc"==b.sortorder?"desc":"asc";a("div",this).removeClass("s"+b.sortorder).addClass("s"+d)}if(c.colCopy){d=a("th",c.hDiv).index(this);if(d==c.dcoln)return!1;d<c.dcoln?a(this).append(c.cdropleft):a(this).append(c.cdropright);c.dcolt=d}else if(!c.colresize){var d=a("th:visible",c.hDiv).index(this),d=parseInt(a("div:eq("+d+")",c.cDrag).css("left"),10),e=jQuery(c.nBtn).outerWidth(),
e=d-e+Math.floor(b.cgwidth/2);a(c.nDiv).hide();a(c.nBtn).hide();a(c.nBtn).css({left:e,top:c.hDiv.offsetTop}).show();var f=parseInt(a(c.nDiv).width(),10);a(c.nDiv).css({top:c.bDiv.offsetTop});e+f>a(c.gDiv).width()?a(c.nDiv).css("left",d-f+1):a(c.nDiv).css("left",e);a(this).hasClass("sorted")?a(c.nBtn).addClass("srtd"):a(c.nBtn).removeClass("srtd")}},function(){a(this).removeClass("thOver");if(a(this).attr("abbr")!=b.sortname)a("div",this).removeClass("s"+b.sortorder);else if(a(this).attr("abbr")==
b.sortname){var d="asc"==b.sortorder?"desc":"asc";a("div",this).addClass("s"+b.sortorder).removeClass("s"+d)}c.colCopy&&(a(c.cdropleft).remove(),a(c.cdropright).remove(),c.dcolt=null)})});c.bDiv.className="bDiv";a(d).before(c.bDiv);a(c.bDiv).css({height:"auto"==b.height?"auto":b.height+"px"}).scroll(function(a){c.scroll()}).append(d);"auto"==b.height&&a("table",c.bDiv).addClass("autoht");c.addCellProp();c.addRowProp();if(!0===b.colResize&&(l=a("thead tr:first th:first",c.hDiv).get(0),null!==l)){c.cDrag.className=
"cDrag";c.cdpad=0;c.cdpad+=isNaN(parseInt(a("div",l).css("borderLeftWidth"),10))?0:parseInt(a("div",l).css("borderLeftWidth"),10);c.cdpad+=isNaN(parseInt(a("div",l).css("borderRightWidth"),10))?0:parseInt(a("div",l).css("borderRightWidth"),10);c.cdpad+=isNaN(parseInt(a("div",l).css("paddingLeft"),10))?0:parseInt(a("div",l).css("paddingLeft"),10);c.cdpad+=isNaN(parseInt(a("div",l).css("paddingRight"),10))?0:parseInt(a("div",l).css("paddingRight"),10);c.cdpad+=isNaN(parseInt(a(l).css("borderLeftWidth"),
10))?0:parseInt(a(l).css("borderLeftWidth"),10);c.cdpad+=isNaN(parseInt(a(l).css("borderRightWidth"),10))?0:parseInt(a(l).css("borderRightWidth"),10);c.cdpad+=isNaN(parseInt(a(l).css("paddingLeft"),10))?0:parseInt(a(l).css("paddingLeft"),10);c.cdpad+=isNaN(parseInt(a(l).css("paddingRight"),10))?0:parseInt(a(l).css("paddingRight"),10);a(c.bDiv).before(c.cDrag);var z=a(c.bDiv).height(),w=a(c.hDiv).height();a(c.cDrag).css({top:-w+"px"});a("thead tr:first th",c.hDiv).each(function(){var d=document.createElement("div");
a(c.cDrag).append(d);b.cgwidth||(b.cgwidth=a(d).width());a(d).css({height:z+w}).mousedown(function(a){c.dragStart("colresize",a,this)}).dblclick(function(a){c.autoResizeColumn(this)});e.msie&&7>e.version&&(c.fixHeight(a(c.gDiv).height()),a(d).hover(function(){c.fixHeight();a(this).addClass("dragging")},function(){c.colresize||a(this).removeClass("dragging")}))})}b.striped&&a("tbody tr:odd",c.bDiv).addClass("erow");b.resizable&&"auto"!=b.height&&(c.vDiv.className="vGrip",a(c.vDiv).mousedown(function(a){c.dragStart("vresize",
a)}).html("<span></span>"),a(c.bDiv).after(c.vDiv));b.resizable&&"auto"!=b.width&&!b.nohresize&&(c.rDiv.className="hGrip",a(c.rDiv).mousedown(function(a){c.dragStart("vresize",a,!0)}).html("<span></span>").css("height",a(c.gDiv).height()),e.msie&&7>e.version&&a(c.rDiv).hover(function(){a(this).addClass("hgOver")},function(){a(this).removeClass("hgOver")}),a(c.gDiv).append(c.rDiv));if(b.usepager){c.pDiv.className="pDiv";c.pDiv.innerHTML='<div class="pDiv2"></div>';a(c.bDiv).after(c.pDiv);l=' <div class="pGroup"> <div class="pFirst pButton"><span></span></div><div class="pPrev pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pcontrol">'+
b.pagetext+' <input type="text" size="4" value="1" /> '+b.outof+' <span> 1 </span></span></div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pNext pButton"><span></span></div><div class="pLast pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pReload pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pPageStat"></span></div>';a("div",c.pDiv).html(l);a(".pReload",c.pDiv).click(function(){c.populate()});
a(".pFirst",c.pDiv).click(function(){c.changePage("first")});a(".pPrev",c.pDiv).click(function(){c.changePage("prev")});a(".pNext",c.pDiv).click(function(){c.changePage("next")});a(".pLast",c.pDiv).click(function(){c.changePage("last")});a(".pcontrol input",c.pDiv).keydown(function(a){13==a.keyCode&&c.changePage("input")});e.msie&&7>e.version&&a(".pButton",c.pDiv).hover(function(){a(this).addClass("pBtnOver")},function(){a(this).removeClass("pBtnOver")});if(b.useRp){l=h="";for(k=0;k<b.rpOptions.length;k++)l=
b.rp==b.rpOptions[k]?'selected="selected"':"",h+="<option value='"+b.rpOptions[k]+"' "+l+" >"+b.rpOptions[k]+"&nbsp;&nbsp;</option>";a(".pDiv2",c.pDiv).prepend("<div class='pGroup'><select name='rp'>"+h+"</select></div> <div class='btnseparator'></div>");a("select",c.pDiv).change(function(){if(b.onRpChange)b.onRpChange(+this.value);else b.newp=1,b.rp=+this.value,c.populate()})}if(b.searchitems){a(".pDiv2",c.pDiv).prepend("<div class='pGroup'> <div class='pSearch pButton'><span></span></div> </div>  <div class='btnseparator'></div>");
a(".pSearch",c.pDiv).click(function(){a(c.sDiv).slideToggle("fast",function(){a(".sDiv:visible input:first",c.gDiv).trigger("focus")})});c.sDiv.className="sDiv";h=b.searchitems;l=k="";for(m=0;m<h.length;m++)""===b.qtype&&!0===h[m].isdefault?(b.qtype=h[m].name,l='selected="selected"'):l="",k+="<option value='"+h[m].name+"' "+l+" >"+h[m].display+"&nbsp;&nbsp;</option>";""===b.qtype&&(b.qtype=h[0].name);a(c.sDiv).append("<div class='sDiv2'>"+b.findtext+" <input type='text' value='"+b.query+"' size='30' name='q' class='qsbox' />  <select name='qtype'>"+
k+"</select></div>");a("input[name=q]",c.sDiv).keydown(function(a){13==a.keyCode&&c.doSearch()});a("select[name=qtype]",c.sDiv).keydown(function(a){13==a.keyCode&&c.doSearch()});a("input[value=Clear]",c.sDiv).click(function(){a("input[name=q]",c.sDiv).val("");b.query="";c.doSearch()});a(c.bDiv).after(c.sDiv)}}a(c.pDiv,c.sDiv).append("<div style='clear:both'></div>");b.title&&(c.mDiv.className="mDiv",c.mDiv.innerHTML='<div class="ftitle">'+b.title+"</div>",a(c.gDiv).prepend(c.mDiv),b.showTableToggleBtn&&
(a(c.mDiv).append('<div class="ptogtitle" title="Minimize/Maximize Table"><span></span></div>'),a("div.ptogtitle",c.mDiv).click(function(){a(c.gDiv).toggleClass("hideBody");a(this).toggleClass("vsble")})));c.cdropleft=document.createElement("span");c.cdropleft.className="cdropleft";c.cdropright=document.createElement("span");c.cdropright.className="cdropright";c.block.className="gBlock";l=a(c.bDiv).height();h=c.bDiv.offsetTop;a(c.block).css({width:c.bDiv.style.width,height:l,background:"white",position:"relative",
marginBottom:-1*l,zIndex:1,top:h,left:"0px"});a(c.block).fadeTo(0,b.blockOpacity);if(a("th",c.hDiv).length){c.nDiv.className="nDiv";c.nDiv.innerHTML="<table cellpadding='0' cellspacing='0'><tbody></tbody></table>";a(c.nDiv).css({marginBottom:-1*l,display:"none",top:h}).noSelect();var v=0;a("th div",c.hDiv).each(function(){var b='checked="checked"';"none"==a("th[axis='col"+v+"']",c.hDiv)[0].style.display&&(b="");a("tbody",c.nDiv).append('<tr><td class="ndcol1"><input type="checkbox" '+b+' class="togCol" value="'+
v+'" /></td><td class="ndcol2">'+this.innerHTML+"</td></tr>");v++});e.msie&&7>e.version&&a("tr",c.nDiv).hover(function(){a(this).addClass("ndcolover")},function(){a(this).removeClass("ndcolover")});a("td.ndcol2",c.nDiv).click(function(){return a("input:checked",c.nDiv).length<=b.minColToggle&&a(this).prev().find("input")[0].checked?!1:c.toggleCol(a(this).prev().find("input").val())});a("input.togCol",c.nDiv).click(function(){if(a("input:checked",c.nDiv).length<b.minColToggle&&!1===this.checked)return!1;
a(this).parent().next().trigger("click")});a(c.gDiv).prepend(c.nDiv);a(c.nBtn).addClass("nBtn").html("<div></div>").attr("title","Hide/Show Columns").click(function(){a(c.nDiv).toggle();return!0});b.showToggleBtn&&a(c.gDiv).prepend(c.nBtn)}a(c.iDiv).addClass("iDiv").css({display:"none"});a(c.bDiv).append(c.iDiv);a(c.bDiv).hover(function(){a(c.nDiv).hide();a(c.nBtn).hide()},function(){c.multisel&&(c.multisel=!1)});a(c.gDiv).hover(function(){},function(){a(c.nDiv).hide();a(c.nBtn).hide()});a(document).mousemove(function(a){c.dragMove(a)}).mouseup(function(a){c.dragEnd()}).hover(function(){},
function(){c.dragEnd()});e.msie&&7>e.version&&(a(".hDiv,.bDiv,.mDiv,.pDiv,.vGrip,.tDiv, .sDiv",c.gDiv).css({width:"100%"}),a(c.gDiv).addClass("ie6"),"auto"!=b.width&&a(c.gDiv).addClass("ie6fullwidthbug"));c.rePosDrag();c.fixHeight();d.p=b;d.grid=c;b.url&&b.autoload&&c.populate();return d};var q=!1;a(document).ready(function(){q=!0});a.fn.flexigrid=function(d){return this.each(function(){if(q)a.addFlex(this,d);else{a(this).hide();var b=this;a(document).ready(function(){a.addFlex(b,d)})}})};a.fn.flexReload=
function(a){return this.each(function(){this.grid&&this.p.url&&this.grid.populate()})};a.fn.flexOptions=function(d){return this.each(function(){this.grid&&a.extend(this.p,d)})};a.fn.flexToggleCol=function(a,b){return this.each(function(){this.grid&&this.grid.toggleCol(a,b)})};a.fn.flexAddData=function(a){return this.each(function(){this.grid&&this.grid.addData(a)})};a.fn.noSelect=function(d){return null===d||d?this.each(function(){e.msie||e.safari?a(this).bind("selectstart",function(){return!1}):
e.mozilla?(a(this).css("MozUserSelect","none"),a("body").trigger("focus")):e.opera?a(this).bind("mousedown",function(){return!1}):a(this).attr("unselectable","on")}):this.each(function(){e.msie||e.safari?a(this).unbind("selectstart"):e.mozilla?a(this).css("MozUserSelect","inherit"):e.opera?a(this).unbind("mousedown"):a(this).removeAttr("unselectable","on")})};a.fn.flexSearch=function(a){return this.each(function(){this.grid&&this.p.searchitems&&this.grid.doSearch()})};a.fn.selectedRows=function(d){var b=
[],c=[];d=a(this.selector+" .trSelected");a(d).each(function(d,e){c={};a(e).data("id");a.each(e.cells,function(a,b){var d=b.abbr,e=b.firstChild.innerHTML;"&nbsp;"==e&&(e="");c[d]=e});b.push(c)});return b}})(jQuery);
