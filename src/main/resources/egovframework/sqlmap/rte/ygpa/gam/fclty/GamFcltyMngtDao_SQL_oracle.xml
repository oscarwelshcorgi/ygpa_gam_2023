<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="ygpa.gam.fclty">

    <typeAlias alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
    <typeAlias alias="hashMap" type="java.util.HashMap"/>
    <typeAlias alias="comDefaultVO" type="egovframework.com.cmm.ComDefaultVO"/>
    <typeAlias alias="fcltyManageVO" type="egovframework.rte.ygpa.gam.fclty.service.GamFcltyManageVO"/>
    
    <insert id="gamFcltyMngtDao.insertFcltyManage">
		<![CDATA[
			INSERT INTO GIS_PRT_FCLTY_CD_F
			( GIS_PRT_FCLTY_CD
			, GIS_PRT_FCLTY_SEQ
			, PRT_FCLTY_NM
			, PRT_FCLTY_STNDRD
			, PRT_FCLTY_UNIT
			, PRT_FCLTY_INSTL_DT
			, PRT_FCLTY_CHANGE_DT
			, REG_USR
			, REGIST_DT
			, PRT_FCLTY_SE
			, PRT_FCLTY_MNG_ENTRPS_CD
			, PRT_FCLTY_GIS_CD
			, GIS_ASSETS_PRT_AT_CODE
			, GIS_ASSETS_CD
			, GIS_ASSETS_SUB_CD
			)
			VALUES 
			( #gisPrtFcltyCd#
			, (SELECT NVL(MAX(GIS_PRT_FCLTY_SEQ),0) + 1 FROM GIS_PRT_FCLTY_CD_F)
			, #prtFcltyNm#
			, #prtFcltyStndrd#
			, #prtFcltyUnit#
			, #prtFcltyInstlDt#
			, #prtFcltyChangeDt#
			, #regUsr#
			, SYSDATE
			, #prtFcltySe#
			, #prtFcltyMngEntrpsCd#
			, #prtFcltyGisCd#
			, #gisAssetsPrtAtCode#
			, #gisAssetsCd#
			, #gisAssetsSubCd# 
			)
		]]>
	</insert>
    
    <select id="gamFcltyMngtDao.selectFcltyMngtList" parameterClass="comDefaultVO" resultClass="egovMap">
         /* egovframework.rte.ygpa.gam.fclty.service.GamFcltyMngtDao_SQL_oracle.selectList */ 
		SELECT * 
		  FROM 
		       (SELECT Z.*, 
		              ROWNUM AS RNUM 
		         FROM 
		              (
		              	SELECT 
		              			GIS_ASSETS_CD
			                    , GIS_ASSETS_PRT_AT_CODE  
			                    , GIS_ASSETS_SUB_CD  
			                    , GIS_PRT_FCLTY_CD 
			                    , GIS_PRT_FCLTY_SEQ 
			                    , PRT_FCLTY_NM 
			                    , PRT_FCLTY_STNDRD 
			                    , PRT_FCLTY_UNIT 
			                    , TO_CHAR(TO_DATE(PRT_FCLTY_INSTL_DT) , 'yyyy-mm-dd')  PRT_FCLTY_INSTL_DT
                                , TO_CHAR(TO_DATE(PRT_FCLTY_CHANGE_DT) , 'yyyy-mm-dd')  PRT_FCLTY_CHANGE_DT 
			                    , REG_USR 
                                , TO_CHAR(REGIST_DT, 'yyyy-mm-dd')  REGIST_DT
			                    , UPD_USR
                                , TO_CHAR(UPDT_DT , 'yyyy-mm-dd')  UPDT_DT 
			                    , PRT_FCLTY_SE 
			                    , PRT_FCLTY_MNG_ENTRPS_CD 
			                    , PRT_FCLTY_GIS_CD  
		                FROM GIS_PRT_FCLTY_CD_F
		                WHERE 1 = 1
		                <isNotEmpty property="searchKeyword">
	           				AND PRT_FCLTY_NM = #searchKeyword#
	           			</isNotEmpty>
		            ORDER BY GIS_ASSETS_CD DESC , 
		                     GIS_ASSETS_PRT_AT_CODE DESC , 
		                     GIS_ASSETS_SUB_CD DESC , 
		                     GIS_PRT_FCLTY_CD DESC , 
		                     GIS_PRT_FCLTY_SEQ DESC 
		              )Z
		       ) 
	     <![CDATA[ WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex# ]]>
    </select>
    
    <select id="gamFcltyMngtDao.selectFcltyMngtListTotCnt" parameterClass="comDefaultVO" resultClass="int">
            SELECT COUNT(*) totcnt
              FROM GIS_PRT_FCLTY_CD_F
             WHERE 1=1 
			<isNotEmpty property="searchKeyword">
   				AND PRT_FCLTY_NM = #searchKeyword#
   			</isNotEmpty>
    </select>
    
	<select id="gamFcltyMngtDao.fcltyMngSelectView" resultClass="fcltyManageVO" parameterClass="fcltyManageVO" >
	    /* egovframework.rte.ygpa.gam.fclty.service.GamFcltyMngtDao_SQL_oracle.select */ 
			SELECT 
				GIS_ASSETS_CD as gisAssetsCd
				, GIS_ASSETS_PRT_AT_CODE as gisAssetsPrtAtCode
				, GIS_ASSETS_SUB_CD as gisAssetsSubCd
				, GIS_PRT_FCLTY_CD as gisPrtFcltyCd
				, GIS_PRT_FCLTY_SEQ as gisPrtFcltySeq
				, PRT_FCLTY_NM as prtFcltyNm
				, PRT_FCLTY_STNDRD as prtFcltyStndrd
				, PRT_FCLTY_UNIT as prtFcltyUnit
				, TO_CHAR(TO_DATE(PRT_FCLTY_INSTL_DT), 'YYYY-MM-DD') as prtFcltyInstlDt
                , TO_CHAR(TO_DATE(PRT_FCLTY_CHANGE_DT), 'YYYY-MM-DD') as prtFcltyChangeDt
				, REG_USR as regUsr
                , TO_CHAR(TO_DATE(REGIST_DT), 'YYYY-MM-DD') as registDt
				, UPD_USR as updUsr
                , TO_CHAR(TO_DATE(UPDT_DT), 'YYYY-MM-DD') as updtDt
				, PRT_FCLTY_SE as prtFcltySe
				, PRT_FCLTY_MNG_ENTRPS_CD as prtFcltyMngEntrpsCd
				, PRT_FCLTY_GIS_CD as prtFcltyGisCd
	  	FROM GIS_PRT_FCLTY_CD_F 
	 		WHERE 1 = 1 
	 		AND GIS_ASSETS_CD = #gisAssetsCd# 
	       	AND GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode# 
	       	AND GIS_ASSETS_SUB_CD = #gisAssetsSubCd# 
	       	AND GIS_PRT_FCLTY_CD = #gisPrtFcltyCd# 
	       	AND GIS_PRT_FCLTY_SEQ = #gisPrtFcltySeq#
  	</select>
  	
  	
  	<update id="gamFcltyMngtDao.updateFclty">
        <![CDATA[
            UPDATE GIS_PRT_FCLTY_CD_F 
			SET 
				GIS_ASSETS_CD = #gisAssetsCd#, 
		       	GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode#, 
		        GIS_ASSETS_SUB_CD = #gisAssetsSubCd#, 
		        GIS_PRT_FCLTY_CD = #gisPrtFcltyCd#, 
		        PRT_FCLTY_NM = #prtFcltyNm#, 
		        PRT_FCLTY_STNDRD = #prtFcltyStndrd#, 
		        PRT_FCLTY_UNIT = #prtFcltyUnit#, 
		        PRT_FCLTY_INSTL_DT = #prtFcltyInstlDt#, 
		        PRT_FCLTY_CHANGE_DT = #prtFcltyChangeDt#, 
		        UPD_USR = #updUsr#, 
		        UPDT_DT = SYSDATE, 
		        PRT_FCLTY_SE = #prtFcltySe#, 
		        PRT_FCLTY_MNG_ENTRPS_CD = #prtFcltyMngEntrpsCd#, 
		        PRT_FCLTY_GIS_CD = #prtFcltyGisCd# 
			 WHERE GIS_ASSETS_CD = #gisAssetsCd# 
			    AND GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode# 
			    AND GIS_ASSETS_SUB_CD = #gisAssetsSubCd# 
			    AND GIS_PRT_FCLTY_CD = #gisPrtFcltyCd# 
			    AND GIS_PRT_FCLTY_SEQ = #gisPrtFcltySeq#
        ]]>
    </update>
    
    
    <delete id="gamFcltyMngtDao.deleteFclty">
        <![CDATA[
			DELETE 
			  	FROM GIS_PRT_FCLTY_CD_F 
			 WHERE GIS_ASSETS_CD = #gisAssetsCd# 
			    AND GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode# 
			    AND GIS_ASSETS_SUB_CD = #gisAssetsSubCd# 
			    AND GIS_PRT_FCLTY_CD = #gisPrtFcltyCd# 
			    AND GIS_PRT_FCLTY_SEQ = #gisPrtFcltySeq# 
        ]]>
    </delete>
    
    
    <select id="gamFcltyMngtDao.selectSearchGisCdPopupList" parameterClass="comDefaultVO" resultClass="egovMap">
         /* egovframework.rte.ygpa.gam.fclty.service.GamFcltyMngtDao_SQL_oracle.selectList */ 
		SELECT * 
		  FROM 
		       (SELECT Z.*, 
		              ROWNUM AS RNUM 
		         FROM 
		              (SELECT 
								GIS_ASSETS_SUB_CD 
						       , GIS_ASSETS_CD
						       , GIS_ASSETS_NM
						       , GIS_ASSETS_MNG_DEPT_CD
						       , GIS_ASSETS_OPER_DEPT_CD
						       , GIS_ASSETS_LOCPLC
						       , GIS_ASSETS_LNM
						       , GIS_ASSETS_LNM_SUB
						       , GIS_ASSETS_PRT_AT_CODE
						       , GIS_ASSETS_AR
						       , GIS_ASSETS_USAGE_YN
						       , GIS_ASSETS_ACQ_PRI
						       , GIS_ASSETS_STNDRD
						       , GIS_ASSETS_BLDDATE
						       , GIS_ASSETS_BLD_DT
						       , GIS_ASSETS_RM
						       , REG_USR
						       , REGISTDT
						       , UPD_USR
						       , UPDTDT
						       , GIS_ASSETS_QUAY_GROUP_CD
						       , GIS_ASSETS_LOC_CD
						       , GIS_ASSETS_SE_CD
						       , GIS_ASSETS_PRPRTY_SE_CD
						       , GIS_ASSETS_INVSTMNT_MTHD
						       , GIS_ASSETS_GIS_CD
						       , GIS_ASSETS_REAL_RENT_AR
						       , DRW_LST_REGIST_YEAR
						       , DRW_LST_SEQ
						       , GIS_ASSETS_VAL_AMT
						       , GIS_ASSETS_VAL_INQIRE_DT
						       , ERP_ASSETS_SE_CD
						       , ERP_ASSETS_NO
						       , ERP_ASSETS_NO_SEQ
						       , ERP_ASSETS_DISUSE_REGIST_YN
						       , ERP_ASSETS_DISUSE_RSN 
						 FROM GIS_ASSETS_CD_F 
						 WHERE 1 = 1
 		                <isNotEmpty property="searchKeyword">
	           				AND GIS_ASSETS_NM like #searchKeyword#
	           			</isNotEmpty>
	           			ORDER BY GIS_ASSETS_CD
		              )Z
		       ) 
	     <![CDATA[ WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex# ]]>
    </select>
    
    
    <select id="gamFcltyMngtDao.selectSearchGisCdPopupListTotCnt" parameterClass="comDefaultVO" resultClass="int">
			SELECT COUNT(*) totcnt
              FROM GIS_ASSETS_CD_F
             WHERE 1=1 
			<isNotEmpty property="searchKeyword">
   				AND GIS_ASSETS_NM like #searchKeyword#
   			</isNotEmpty>
    </select>
</sqlMap>