<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="ygpa.gam.code">

    <typeAlias alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
    <typeAlias alias="hashMap" type="java.util.HashMap"/>
    <typeAlias alias="olnlpVO" type="egovframework.rte.ygpa.gam.code.service.GamOlnlpFVO"/>
    <typeAlias alias="gisAssetsVO" type="egovframework.rte.ygpa.gam.code.service.GisAssetsCodeVO"/>
    
    <select id="gamOlnlpMngtDao.selectOlnlpInsertList" parameterClass="gisAssetsVO" resultClass="egovMap">
         SELECT * 
		  FROM 
		       (SELECT Z.*, 
		              ROWNUM AS RNUM 
		         FROM 
		              (SELECT GIS_ASSETS_CD, 
		                     GIS_ASSETS_PRT_AT_CODE, 
		                     (SELECT CODE_NM FROM COMTCCMMNDETAILCODE WHERE CODE_ID = 'GAM019' AND CODE = GIS_ASSETS_PRT_AT_CODE) GIS_ASSETS_PRT_AT_NAME,
		                     GIS_ASSETS_SUB_CD, 
		                     GIS_ASSETS_NM, 
		                     GIS_ASSETS_MNG_DEPT_CD, 
		                     GIS_ASSETS_OPER_DEPT_CD, 
		                     GIS_ASSETS_LOCPLC, 
		                     GIS_ASSETS_LNM, 
		                     GIS_ASSETS_LNM_SUB,
		                     GIS_ASSETS_LNM || '-' || GIS_ASSETS_LNM_SUB AS GIS_ASSETS_LNM_DISPLAY, 
		                     GIS_ASSETS_AR, 
		                     GIS_ASSETS_USAGE_YN, 
		                     GIS_ASSETS_ACQ_PRI, 
		                     GIS_ASSETS_STNDRD, 
		                     GIS_ASSETS_BLDDATE, 
		                     GIS_ASSETS_BLD_DT, 
		                     GIS_ASSETS_RM, 
		                     GIS_ASSETS_QUAY_GROUP_CD, 
		                     GIS_ASSETS_LOC_CD, 
		                     GIS_ASSETS_SE_CD, 
		                     GIS_ASSETS_PRPRTY_SE_CD, 
		                     GIS_ASSETS_INVSTMNT_MTHD, 
		                     GIS_ASSETS_GIS_CD, 
		                     GIS_ASSETS_REAL_RENT_AR, 
		                     DRW_LST_REGIST_YEAR, 
		                     DRW_LST_SEQ, 
		                     GIS_ASSETS_VAL_AMT, 
		                     ERP_ASSETS_SE_CD, 
		                     ERP_ASSETS_NO, 
		                     ERP_ASSETS_NO_SEQ, 
		                     ERP_ASSETS_DISUSE_REGIST_YN, 
		                     ERP_ASSETS_DISUSE_RSN, 
		                     GIS_ASSETS_QUAY_CD, 
		                     GIS_ASSETS_VAL_INQIRE_DT, 
		                     ERP_ASSETS_CLS 
		                FROM GIS_ASSETS_CD_F 
		                WHERE 1 = 1
		                <isNotEmpty property="gisAssetsPrtAtCode">
	           				AND GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode#
	           			</isNotEmpty>
	           			<isNotEmpty property="gisAssetsCd">
	           				AND GIS_ASSETS_CD = #gisAssetsCd#
	           			</isNotEmpty>
	           			<isNotEmpty property="gisAssetsSubCd">
	           				AND GIS_ASSETS_SUB_CD = #gisAssetsSubCd#
	           			</isNotEmpty>
	           			<isNotEmpty property="gisAssetsLocplc">
	           				AND GIS_ASSETS_LOCPLC LIKE '%' || #gisAssetsLocplc# || '%'
	           			</isNotEmpty>
			           	<isNotEmpty property="gisAssetsLnm">
			           		AND GIS_ASSETS_LNM = #gisAssetsLnm#
			           	</isNotEmpty>
			           	<isNotEmpty property="gisAssetsLnmSub">
			           		AND GIS_ASSETS_LNM_SUB = #gisAssetsLnmSub#
			           	</isNotEmpty>
		            ORDER BY GIS_ASSETS_CD DESC , 
		                     GIS_ASSETS_PRT_AT_CODE DESC , 
		                     GIS_ASSETS_SUB_CD DESC 
		              )Z 
		       )
	     <![CDATA[ WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex# ]]>
    </select>
    
    <select id="gamOlnlpMngtDao.selectOlnlpInsertListTotCnt" parameterClass="gisAssetsVO" resultClass="int">
            SELECT COUNT(*) totcnt FROM GIS_ASSETS_CD_F
            WHERE 1 = 1
			<isNotEmpty property="gisAssetsPrtAtCode">
           		AND GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode#
           	</isNotEmpty>
           	<isNotEmpty property="gisAssetsCd">
           		AND GIS_ASSETS_CD = #gisAssetsCd#
           	</isNotEmpty>
           	<isNotEmpty property="gisAssetsSubCd">
           		AND GIS_ASSETS_SUB_CD = #gisAssetsSubCd#
           	</isNotEmpty>
           	<isNotEmpty property="gisAssetsLocplc">
           		AND GIS_ASSETS_LOCPLC LIKE '%' || #gisAssetsLocplc# || '%'
           	</isNotEmpty>
           	<isNotEmpty property="gisAssetsLnm">
           		AND GIS_ASSETS_LNM = #gisAssetsLnm#
           	</isNotEmpty>
           	<isNotEmpty property="gisAssetsLnmSub">
           		AND GIS_ASSETS_LNM_SUB = #gisAssetsLnmSub#
           	</isNotEmpty>
    </select>
    
    <select id="gamOlnlpMngtDao.selectOlnlpMngtList" parameterClass="olnlpVO" resultClass="egovMap">
         SELECT * 
		  FROM 
		       (SELECT Z.*, 
		              ROWNUM AS RNUM 
		         FROM 
		              (SELECT GIS_ASSETS_CD, 
		                     GIS_ASSETS_PRT_AT_CODE, 
		                     GIS_ASSETS_SUB_CD, 
		                     OLNLP_SEQ, 
		                     OLNLP, 
		                     TO_CHAR(TO_DATE(BEGIN_DT),'YYYY-MM-DD') BEGIN_DT,
                             TO_CHAR(TO_DATE(END_DT),'YYYY-MM-DD') END_DT
		                FROM OLNLP_F 
		                WHERE GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode#
		                AND GIS_ASSETS_SUB_CD = #gisAssetsSubCd#
		                AND GIS_ASSETS_CD = #gisAssetsCd#
		            ORDER BY GIS_ASSETS_CD DESC , 
		                     GIS_ASSETS_PRT_AT_CODE DESC , 
		                     GIS_ASSETS_SUB_CD DESC , 
		                     OLNLP_SEQ DESC 
		              )Z 
		        )
	     <![CDATA[ WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex# ]]>
    </select>
    
    <select id="gamOlnlpMngtDao.selectOlnlpMngtListTotCnt" parameterClass="olnlpVO" resultClass="int">
            SELECT COUNT(*) totcnt 
            	FROM OLNLP_F
            WHERE GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode#
			AND GIS_ASSETS_SUB_CD = #gisAssetsSubCd#
		    AND GIS_ASSETS_CD = #gisAssetsCd#
    </select>
  	
  	<insert id="gamOlnlpMngtDao.insertOlnlpMngt" parameterClass="olnlpVO">
		INSERT 
		  INTO OLNLP_F 
		       ( 
		           GIS_ASSETS_CD , 
		           GIS_ASSETS_PRT_AT_CODE , 
		           GIS_ASSETS_SUB_CD , 
		           OLNLP_SEQ , 
		           OLNLP , 
		           REG_USR , 
		           REGIST_DT , 
		           BEGIN_DT , 
		           END_DT 
		       ) 
		       VALUES 
		       ( 
		           #gisAssetsCd# , 
		           #gisAssetsPrtAtCode# , 
		           #gisAssetsSubCd# , 
		           (SELECT MAX(OLNLP_SEQ+1) FROM OLNLP_F) , 
		           #olnlp# , 
		           #regUsr# , 
		           SYSDATE , 
		           #beginDt# , 
		           #endDt# 
		       )  
    </insert>
    
  	<update id="gamOlnlpMngtDao.updateOlnlpMngt" parameterClass="olnlpVO">
		UPDATE OLNLP_F 
		SET 
		       OLNLP = #olnlp#, 
		       UPD_USR = #updUsr#, 
		       UPDT_DT = SYSDATE, 
		       BEGIN_DT = #beginDt#, 
		       END_DT = #endDt# 
		 WHERE GIS_ASSETS_CD = #gisAssetsCd# 
		       AND GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode# 
		       AND GIS_ASSETS_SUB_CD = #gisAssetsSubCd# 
		       AND OLNLP_SEQ = #olnlpSeq#        
    </update>
    
    <delete id="gamOlnlpMngtDao.deleteOlnlpMngt" parameterClass="olnlpVO">
      DELETE 
		  FROM OLNLP_F 
		 WHERE GIS_ASSETS_CD = #gisAssetsCd# 
		       AND GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode# 
		       AND GIS_ASSETS_SUB_CD = #gisAssetsSubCd# 
		       AND OLNLP_SEQ = #olnlpSeq#
    </delete>
</sqlMap>