<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="ygpa.gam.popup">

    <typeAlias alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
    <typeAlias alias="hashMap" type="java.util.HashMap"/>
    <typeAlias alias="gamPopupSocFacCdVO" type="egovframework.rte.ygpa.gam.popup.service.GamPopupSocFacCdVO"/>
    

    <select id="gamPopupSocFacCdDao.selectSocFacCdList_S" parameterClass="gamPopupSocFacCdVO" resultClass="egovMap">
           SELECT A.*
           FROM (
                   SELECT  ROWNUM RNUM, S.*
                     FROM (
                     	   	SELECT  
                     	   		FAC_CODE
                     	   		,FAC_SUB_CODE
                     	   		,FAC_KOR_NM 
                     	   	FROM 
                     	   		P2MGR.FACIL_NM_F@YGPA_P2MGR
			                WHERE 
			                	1 = 1
			                 <!-- 청코드 -->
                             <isNotEmpty property="prtAtCode">
                                 AND PRT_AT_CODE = #prtAtCode#
                             </isNotEmpty>
			                 <!-- 시설코드 -->
                             <isNotEmpty property="facCode">
                                 AND FAC_CODE = #facCode#  
                             </isNotEmpty>
                             <!-- 시설부코드 -->
                             <isNotEmpty property="facSubCode">
                                 AND FAC_SUB_CODE = #facSubCode#  
                             </isNotEmpty>
                             <!-- 시설명 -->
                             <isNotEmpty property="feeTpKorNm">
                                 AND FEE_TP_KOR_NM = #feeTpKorNm#  
                             </isNotEmpty>
                             
                ) S	
                ORDER BY PRT_AT_CODE, FEE_TP
             ) A
        <![CDATA[ WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex# ]]>
    </select>
    
    <select id="gamPopupSocFacCdDao.selectSocFacCdTotCnt_S" parameterClass="gamPopupSocFacCdVO" resultClass="int">
        	SELECT COUNT(*) totcnt        
        	FROM
            	P2MGR.FACIL_NM_F@YGPA_P2MGR
            WHERE
            	1 = 1
			    <!-- 청코드 -->
                <isNotEmpty property="prtAtCode">
                    AND PRT_AT_CODE = #prtAtCode#
                </isNotEmpty>
			    <!-- 시설코드 -->
                <isNotEmpty property="facCode">
                    AND FAC_CODE = #facCode#  
                </isNotEmpty>
                <!-- 시설부코드 -->
                <isNotEmpty property="facSubCode">
                    AND FAC_SUB_CODE = #facSubCode#  
                </isNotEmpty>
                <!-- 시설명 -->
                <isNotEmpty property="feeTpKorNm">
                    AND FEE_TP_KOR_NM = #feeTpKorNm#  
                </isNotEmpty>
    </select>
</sqlMap>