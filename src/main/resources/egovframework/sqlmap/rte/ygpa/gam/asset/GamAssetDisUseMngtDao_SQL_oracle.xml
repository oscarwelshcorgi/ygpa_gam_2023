<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="ygpa.gam.asset">

    <typeAlias alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
    <typeAlias alias="hashMap" type="java.util.HashMap"/>
    <typeAlias alias="gamAssetDisUseMngtVO" type="egovframework.rte.ygpa.gam.asset.service.GamAssetDisUseMngtVO"/>
    
    
    <select id="gamAssetDisUseMngtDao.selectAssetDisUseList_D" parameterClass="gamAssetDisUseMngtVO" resultClass="egovMap">
           SELECT A.*
           FROM (
                   SELECT  ROWNUM RNUM, S.*
                     FROM (
                           SELECT 
							         G.GIS_ASSETS_SUB_CD
							       , G.GIS_ASSETS_CD
							       , G.GIS_ASSETS_NM
							       , G.GIS_ASSETS_MNG_DEPT_CD
							       , G.GIS_ASSETS_OPER_DEPT_CD
							       , G.GIS_ASSETS_LOCPLC
							       , G.GIS_ASSETS_LNM
							       , G.GIS_ASSETS_LNM_SUB
							       , G.GIS_ASSETS_PRT_AT_CODE
							       , G.GIS_ASSETS_AR
							       , G.GIS_ASSETS_USAGE_YN
							       , G.GIS_ASSETS_ACQ_PRI
							       , G.GIS_ASSETS_STNDRD
							       , G.GIS_ASSETS_BLDDATE
							       , TO_CHAR(G.GIS_ASSETS_BLD_DT, 'YYYY-MM-DD') GIS_ASSETS_BLD_DT
							       , G.GIS_ASSETS_RM
							       , G.REG_USR
							       , TO_CHAR(G.REGISTDT, 'YYYY-MM-DD') REGISTDT
							       , G.UPD_USR
							       , TO_CHAR(G.UPDTDT, 'YYYY-MM-DD') UPDTDT
							       , G.GIS_ASSETS_QUAY_GROUP_CD
							       , G.GIS_ASSETS_LOC_CD
							       , G.GIS_ASSETS_SE_CD
							       , G.GIS_ASSETS_PRPRTY_SE_CD
							       , G.GIS_ASSETS_INVSTMNT_MTHD
							       , G.GIS_ASSETS_GIS_CD
							       , G.GIS_ASSETS_REAL_RENT_AR
							       , G.DRW_LST_REGIST_YEAR
							       , G.DRW_LST_SEQ
							       , G.GIS_ASSETS_VAL_AMT
							       , TO_CHAR(G.GIS_ASSETS_VAL_INQIRE_DT, 'YYYY-MM-DD') GIS_ASSETS_VAL_INQIRE_DT
							       , G.ERP_ASSETS_SE_CD
							       , G.ERP_ASSETS_NO
							       , G.ERP_ASSETS_NO_SEQ
							       , G.ERP_ASSETS_DISUSE_REGIST_YN
							       , G.ERP_ASSETS_DISUSE_RSN
							FROM GIS_ASSETS_CD_F G
                            WHERE 1=1 
                            
                             <isNotEmpty property="sGisAssetsCd">
					             AND G.GIS_ASSETS_CD = #sGisAssetsCd#  
					         </isNotEmpty>
					         
					         <isNotEmpty property="sGisAssetsNm">
					             AND G.GIS_ASSETS_NM = #sGisAssetsNm#  
					         </isNotEmpty>
					         
                             ORDER BY REGISTDT DESC
                ) S
             ) A
        <![CDATA[ WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex# ]]>
    </select>
    
    <select id="gamAssetDisUseMngtDao.selectAssetDisUseListTotCnt_S" parameterClass="gamAssetDisUseMngtVO" resultClass="int">
            SELECT COUNT(*) totcnt
              FROM GIS_ASSETS_CD_F G
             WHERE 1=1 
             
             <isNotEmpty property="sGisAssetsCd">
                 AND G.GIS_ASSETS_CD = #sGisAssetsCd#  
             </isNotEmpty>
             
             <isNotEmpty property="sGisAssetsNm">
                 AND G.GIS_ASSETS_NM = #sGisAssetsNm#  
             </isNotEmpty>
    </select>
    
    <update id="gamAssetDisUseMngtDao.updateAssetDisUse_S">
        UPDATE GIS_ASSETS_CD_F SET
               UPD_USR                     = #updUsr#
             , UPDTDT                      = SYSDATE
             , ERP_ASSETS_DISUSE_REGIST_YN = #erpAssetsDisuseRegistYn# 
             , ERP_ASSETS_DISUSE_RSN       = #erpAssetsDisuseRsn#
         WHERE GIS_ASSETS_PRT_AT_CODE      = #gisAssetsPrtAtCode#
           AND GIS_ASSETS_SUB_CD           = #gisAssetsSubCd#
           AND GIS_ASSETS_CD               = #gisAssetsCd#
    </update>
    
</sqlMap>
