<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="ygpa.gam.popup">

    <typeAlias alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
    <typeAlias alias="hashMap" type="java.util.HashMap"/>
    <typeAlias alias="gamPopupFcltsMngGroupVO" type="egovframework.rte.ygpa.gam.popup.service.GamPopupFcltsMngGroupVO"/>
    

    <select id="gamPopupFcltsMngGroupDao.selectFcltsMngGroupList_D" parameterClass="gamPopupFcltsMngGroupVO" resultClass="egovMap">
           SELECT A.*
           FROM (
                   SELECT  ROWNUM RNUM, S.*
                     FROM (
							SELECT
								 FCLTS_MNG_GROUP_NO
								,FCLTS_MNG_GROUP_NM
								,LOC
								,OWNER
								,TO_CHAR(BLD_DT,'YYYY-MM-DD') AS BLD_DT
								,TO_CHAR(CNST_BEGIN_DT,'YYYY-MM-DD') AS CNST_BEGIN_DT
								,TO_CHAR(CNST_END_DT,'YYYY-MM-DD') AS CNST_END_DT
								,CNSTRTR
								,LTRIM(TO_CHAR(NVL(CNSTRCT_AMT,0),'999,999,999,990')) AS CNSTRCT_AMT
								,FCLTS_CN
								,FCLTS_STRCT
								,LTRIM(TO_CHAR(NVL(ARCH_FCLTS_CNT,0),'999,999,999,990')) AS ARCH_FCLTS_CNT
								,LTRIM(TO_CHAR(NVL(CVL_ENG_FCLTS_CNT,0),'999,999,999,990')) AS CVL_ENG_FCLTS_CNT
								,LTRIM(TO_CHAR(NVL(MECH_FCLTS_CNT,0),'999,999,999,990')) AS MECH_FCLTS_CNT
								,LTRIM(TO_CHAR(NVL(ELCTY_FCLTS_CNT,0),'999,999,999,990')) AS ELCTY_FCLTS_CNT
								,LTRIM(TO_CHAR(NVL(INFO_COMM_FCLTS_CNT,0),'999,999,999,990')) AS INFO_COMM_FCLTS_CNT
								,LTRIM(TO_CHAR(NVL(ETC_FCLTS_CNT,0),'999,999,999,990')) AS ETC_FCLTS_CNT
								,RM
								,REG_USR
								,TO_CHAR(REGIST_DT,'YYYY-MM-DD HH24:MI:SS') AS REGIST_DT
								,UPD_USR
								,TO_CHAR(UPDT_DT,'YYYY-MM-DD HH24:MI:SS') AS UPDT_DT
							FROM
							    FCLTS_MNG_GROUP_F
							WHERE
								1 = 1
							    <isNotEmpty property="sFcltsMngGroupNo">
							    	AND FCLTS_MNG_GROUP_NO LIKE #sFcltsMngGroupNo# || '%'
							    </isNotEmpty>
							    <isNotEmpty property="sFcltsMngGroupNm">
							    	AND FCLTS_MNG_GROUP_NM LIKE '%' || #sFcltsMngGroupNm# || '%'
							    </isNotEmpty>
							ORDER BY FCLTS_MNG_GROUP_NM                                                  
                ) S	
             ) A
        <![CDATA[ WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex# ]]>
    </select>
    
    <select id="gamPopupFcltsMngGroupDao.selectFcltsMngGroupListTotCnt_S" parameterClass="gamPopupFcltsMngGroupVO" resultClass="int">
			SELECT
			    COUNT(*) CNT
			FROM
			    FCLTS_MNG_GROUP_F
			WHERE
				1 = 1
			    <isNotEmpty property="sFcltsMngGroupNo">
			    	AND FCLTS_MNG_GROUP_NO LIKE #sFcltsMngGroupNo# || '%'
			    </isNotEmpty>
			    <isNotEmpty property="sFcltsMngGroupNm">
			    	AND FCLTS_MNG_GROUP_NM LIKE '%' || #sFcltsMngGroupNm# || '%'
			    </isNotEmpty>
    </select>
</sqlMap>