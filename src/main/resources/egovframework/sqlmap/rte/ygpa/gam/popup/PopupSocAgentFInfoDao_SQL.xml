<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="ygpa.gam.popup">

    <typeAlias alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
    <typeAlias alias="hashMap" type="java.util.HashMap"/>
    <typeAlias alias="gamPopupSocAgentFInfoVO" type="egovframework.rte.ygpa.gam.popup.service.GamPopupSocAgentFInfoVO"/>
    

    <select id="gamPopupSocAgentFInfoDao.selectSocAgentFInfoList_S" parameterClass="gamPopupSocAgentFInfoVO" resultClass="egovMap">
           SELECT A.*
           FROM (
                   SELECT  ROWNUM RNUM, S.*
                     FROM (
                           SELECT 
					        		PRT_AT_CODE
					              , CMPL_YR
					              , CONST_NO
					              , AGENT_CODE
					              , SOC_PRT_AT_CODE
					              , SOC_CNST_NM
					              , CNST_LOC
					              , AGENT_NAME
					              , AGENT_ADDR
					        	  , AGENT_OWNER
					        	  , SOC_OBJ
					        	  , SOC_GIGIAN
					        	  , SOC_WIDTH
					        	  , SOC_NATION
					        	  , SOC_PRIVATE
					        	  , TO_CHAR(APRV_DT,'YYYY-MM-DD') AS APRV_DT
					        	  , TO_CHAR(PERF_DT,'YYYY-MM-DD') AS PERF_DT
					        	  , TO_CHAR(CMPL_DT,'YYYY-MM-DD') AS CMPL_DT
					        	  , TO_CHAR(START_DT,'YYYY-MM-DD') AS START_DT
					        	  , TO_CHAR(MODIFY_DT1,'YYYY-MM-DD') AS MODIFY_DT1
					        	  , TO_CHAR(MODIFY_DT2,'YYYY-MM-DD') AS MODIFY_DT2
					        	  , MODIFY_TXT
					        	  , PRIME_TXT
					        	  , TOTAL_AMNT
					        	  , ACC_FEE
					        	  , RESERACH_AMNT
					        	  , PURE_AMNT
					        	  , EXTRA_AMNT1
					        	  , EXTRA_AMNT2
					        	  , EXTRA_AMNT3
					        	  , EXTRA_AMNT4
					        	  , REMARK
					        	  , TO_CHAR(MANAGE_DT,'YYYY-MM-DD') AS MANAGE_DT
					        	  , TO_CHAR(ASSET_DT,'YYYY-MM-DD') AS ASSET_DT
					        	  , TO_CHAR(FREEUSE_DT,'YYYY-MM-DD') AS FREEUSE_DT
					        	  , TO_CHAR(OTHER_DT,'YYYY-MM-DD') AS OTHER_DT
					        	  , TO_CHAR(FREEFR_DT,'YYYY-MM-DD') AS FREEFR_DT
					        	  , TO_CHAR(FREETO_DT,'YYYY-MM-DD') AS FREETO_DT
					        	  , RANGE
					        	  , BZ_RGST_ID
					        	  , UPDT_UID
					        	  , TO_CHAR(UPDT_DATE,'YYYY-MM-DD') AS UPDT_DATE
					        FROM P2MGR.SOC_AGENT_F@YGPA_P2MGR
					        
								 <![CDATA[  WHERE 1<>1 ]]>
					
						         <isNotEmpty property="sPrtAtCode">
						             OR (PRT_AT_CODE = #sPrtAtCode#
							         
							         <isNotEmpty property="sAgentCode">
							             AND AGENT_CODE = #sAgentCode#
							         </isNotEmpty>
							         
							         )
						         </isNotEmpty>
						         
						     <!-- ORDER BY REGIST_DT DESC -->
                             ORDER BY D.CMPL_YR DESC, D.UPDT_DATE DESC
                ) S
             ) A
        <![CDATA[ WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex# ]]>
    </select>
    
    <select id="gamPopupSocAgentFInfoDao.selectSocAgentFInfoListTotCnt_S" parameterClass="gamPopupSocAgentFInfoVO" resultClass="int">
    
        SELECT 
        		COUNT(*) AS TOTAL_CNT
        FROM 
        	P2MGR.SOC_AGENT_F@YGPA_P2MGR
					        
		<![CDATA[  WHERE 1<>1 ]]>
	
	         <isNotEmpty property="sPrtAtCode">
	             OR (PRT_AT_CODE = #sPrtAtCode#
		         
		         <isNotEmpty property="sAgentCode">
		             AND AGENT_CODE = #sAgentCode#
		         </isNotEmpty>
		         
		         )
	         </isNotEmpty>

    </select>
</sqlMap>