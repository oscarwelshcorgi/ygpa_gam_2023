<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="ygpa.gam.fcltyMng">

	<typeAlias alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias alias="hashMap" type="java.util.HashMap"/>
    <typeAlias alias="GamFcltyUsageSttusInqireVO" type="egovframework.rte.ygpa.gam.fcltyMng.service.GamFcltyUsageSttusInqireVO"/>

<!-- GIS 항만시설 목록 조회 -->
	<select id="gamFcltyUsageSttusInqireDao.selectFcltyGisPrtFcltyCdList" parameterClass="GamFcltyUsageSttusInqireVO" resultClass="egovMap">
		SELECT A.*
		  FROM (
		      SELECT ROWNUM RNUM, S.*
		        FROM (
					SELECT M.GIS_ASSETS_PRT_AT_CODE AS GIS_ASSETS_PRT_AT_CODE
					      ,M.GIS_ASSETS_CD AS GIS_ASSETS_CD
					      ,M.GIS_ASSETS_SUB_CD AS GIS_ASSETS_SUB_CD
					      ,GAM_GETCODENAME('GAM019', M.GIS_ASSETS_PRT_AT_CODE) AS GIS_ASSETS_PRT_AT_NM
<!-- 					      ,M.GIS_ASSETS_PRT_AT_CODE||'-'||M.GIS_ASSETS_CD||'-'||M.GIS_ASSETS_SUB_CD AS GIS_ASSETS	 -->
					      ,NVL(D.CODE_NM, '') AS PRT_FCLTY_SE
					      ,M.PRT_FCLTY_NM AS PRT_FCLTY_NM
					      ,M.PRT_FCLTY_STNDRD AS PRT_FCLTY_STNDRD
					      ,M.PRT_FCLTY_UNIT AS PRT_FCLTY_UNIT
					      ,TO_CHAR(M.PRT_FCLTY_INSTL_DT, 'YYYY-MM-DD') AS PRT_FCLTY_INSTL_DT
					      ,TO_CHAR(M.PRT_FCLTY_CHANGE_DT, 'YYYY-MM-DD') AS PRT_FCLTY_CHANGE_DT
					      ,GAM_GETENTRPSNM(M.PRT_FCLTY_MNG_ENTRPS_CD,'1') AS PRT_FCLTY_MNG_ENTRPS
					      ,TO_CHAR(M.PRT_FCLTY_EXPR_DT, 'YYYY-MM-DD') AS PRT_FCLTY_EXPR_DT
					      ,M.PRT_PRT_FCLTY_CNT AS PRT_PRT_FCLTY_CNT
					      ,M.PRT_PRT_FCLTY_MNGER AS PRT_PRT_FCLTY_MNGER
					      ,M.FCLTS_MNG_NO AS FCLTS_MNG_NO
					      ,M.FCLTS_MNG_GROUP_NO AS FCLTS_MNG_GROUP_NO
					  FROM GIS_PRT_FCLTY_CD_F M LEFT OUTER JOIN
					       COMTCCMMNDETAILCODE D ON (D.CODE = M.PRT_FCLTY_SE)
					 WHERE D.CODE_ID = 'GAM003'
					<isNotEmpty property="sPrtAtCode" prepend="AND">
						   M.GIS_ASSETS_PRT_AT_CODE = #sPrtAtCode#
					</isNotEmpty>
					<isNotEmpty property="sFcltsJobSe" prepend="AND">
						   D.CODE_NM like '%'||#sFcltsJobSe#||'%'
					</isNotEmpty>
					<isNotEmpty property="sPrtFcltyNm" prepend="AND">
						   M.PRT_FCLTY_NM like '%'||#sPrtFcltyNm#||'%'
					</isNotEmpty>
					<isNotEmpty property="sFcltsMngNo" prepend="AND">
						   M.FCLTS_MNG_NO like '%'||#sFcltsMngNo#||'%'
					</isNotEmpty>

<!--		              SELECT GIS_ASSETS_PRT_AT_CODE AS GIS_ASSETS_PRT_AT_CODE
		              		,GIS_ASSETS_CD AS GIS_ASSETS_CD
		              		,GIS_ASSETS_SUB_CD AS GIS_ASSETS_SUB_CD
		              		,GIS_ASSETS_PRT_AT_CODE||'-'||GIS_ASSETS_CD||'-'||GIS_ASSETS_SUB_CD AS GIS_ASSETS
		                    ,GAM_GETCODENAME('GAM003', PRT_FCLTY_SE) AS PRT_FCLTY_SE
		                    ,PRT_FCLTY_NM AS PRT_FCLTY_NM
		                    ,PRT_FCLTY_STNDRD AS PRT_FCLTY_STNDRD
		                    ,PRT_FCLTY_UNIT AS PRT_FCLTY_UNIT
		                    ,TO_CHAR(PRT_FCLTY_INSTL_DT, 'YYYY-MM-DD') AS PRT_FCLTY_INSTL_DT
		                    ,TO_CHAR(PRT_FCLTY_CHANGE_DT, 'YYYY-MM-DD') AS PRT_FCLTY_CHANGE_DT
		                    ,GAM_GETENTRPSNM(PRT_FCLTY_MNG_ENTRPS_CD,'1') AS PRT_FCLTY_MNG_ENTRPS
		                    ,TO_CHAR(PRT_FCLTY_EXPR_DT, 'YYYY-MM-DD') AS PRT_FCLTY_EXPR_DT
		                    ,PRT_PRT_FCLTY_CNT AS PRT_PRT_FCLTY_CNT
		                    ,PRT_PRT_FCLTY_MNGER AS PRT_PRT_FCLTY_MNGER
		                    ,FCLTS_MNG_GROUP_NO AS FCLTS_MNG_GROUP_NO
		                FROM GIS_PRT_FCLTY_CD_F
 -->
		             ) S
		        ) A
		<![CDATA[
			WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex#
		]]>
	</select>

	<select id="gamFcltyUsageSttusInqireDao.selectFcltyGisPrtFcltyCdListTotCnt" parameterClass="GamFcltyUsageSttusInqireVo" resultClass="int">
		SELECT COUNT(*) totcnt
	      FROM GIS_PRT_FCLTY_CD_F M LEFT OUTER JOIN
       		   COMTCCMMNDETAILCODE D ON (D.CODE = M.PRT_FCLTY_SE)
		 WHERE D.CODE_ID = 'GAM003'
		<isNotEmpty property="sPrtAtCode" prepend="AND">
			   M.GIS_ASSETS_PRT_AT_CODE = #sPrtAtCode#
		</isNotEmpty>
		<isNotEmpty property="sFcltsJobSe" prepend="AND">
			   D.CODE_NM like '%'||#sFcltsJobSe#||'%'
		</isNotEmpty>
		<isNotEmpty property="sPrtFcltyNm" prepend="AND">
			   M.PRT_FCLTY_NM like '%'||#sPrtFcltyNm#||'%'
		</isNotEmpty>
		<isNotEmpty property="sFcltsMngNo" prepend="AND">
			   M.FCLTS_MNG_NO like '%'||#sFcltsMngNo#||'%'
		</isNotEmpty>
	</select>

<!-- 시설물 사용현황 목록 조회 -->
    <select id="gamFcltyUsageSttusInqireDao.selectFcltyAssetsRentList" parameterClass="GamFcltyUsageSttusInqireVO" resultClass="egovMap">
		SELECT A.*
			FROM (
				SELECT  ROWNUM RNUM, S.*
					FROM (
						SELECT GAM_GETCODENAME('GAM019', D.PRT_AT_CODE) AS PRT_AT_CODE
			                 , TO_CHAR(D.USAGE_PD_FROM, 'YYYY-MM-DD') || ' ~ ' || TO_CHAR(D.USAGE_PD_TO, 'YYYY-MM-DD') AS USAGE_PD
			                 , GAM_GETENTRPSNM(M.ENTRPSCD, '1') AS ENTRPSCD
			                 , TO_CHAR(M.REQST_DT, 'YYYY-MM-DD') AS REQST_DT
			                 , TO_CHAR(M.PRMISN_DT, 'YYYY-MM-DD') AS PRMISN_DT
			                 , M.PAY_MTH AS PAY_MTH
			                 , GAM_GETCODENAME('GAM016', M.TAXT_SE) AS TAXT_NM
			                 , D.USAGE_AR AS USAGE_AR
			                 , D.USAGE_PURPS AS USAGE_PURPS
							 , D.USAGE_DTLS AS USAGE_DTLS
			                 , D.ENTRPS_SE AS ENTRPS_SE
			                 , D.COMPUT_DTLS AS COMPUT_DTLS
			                 , D.OLNLP AS OLNLP
			                 , D.APPLC_TARIFF AS APPLC_TARIFF
			                 , GAM_GETCODENAME('GAM019',D.APPLC_MTH) AS APPLC_MTH
			                 , D.FEE AS FEE
							 , GAM_GETCODENAME('GAM008', M.NTIC_MTH) AS NTIC_MTH
						  FROM ASSETS_RENT_DETAIL_F D, ASSETS_RENT_F M
						 WHERE 1=1
                		   AND D.GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode#
           				   AND D.GIS_ASSETS_CD = #gisAssetsCd#
           				   AND D.GIS_ASSETS_SUB_CD = #gisAssetsSubCd#
                   		   AND M.PRMISN_YN = 'Y'

                   			<isNotEmpty property="sUsagePdFrom" prepend="AND">
								<![CDATA[
									  D.USAGE_PD_FROM >= TO_DATE(#sUsagePdFrom#, 'YYYY-MM-DD')
								]]>
							</isNotEmpty>
							<isNotEmpty property="sUsagePdTo" prepend="AND">
								<![CDATA[
									  D.USAGE_PD_FROM <= TO_DATE(#sUsagePdTo#, 'YYYY-MM-DD')
								]]>
							</isNotEmpty>
						   AND D.PRT_AT_CODE = M.PRT_AT_CODE
						   AND D.MNG_YEAR = M.MNG_YEAR
						   AND D.MNG_NO = M.MNG_NO
						   AND D.MNG_CNT = M.MNG_CNT

						 ORDER BY D.PRT_AT_CODE DESC, D.MNG_YEAR DESC, D.MNG_NO, D.MNG_CNT
					) S
			) A
		<![CDATA[
		WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex#
		]]>
    </select>

	<select id="gamFcltyUsageSttusInqireDao.selectFcltyAssetsRentListTotCnt" parameterClass="GamFcltyUsageSttusInqireVO" resultClass="int">
		SELECT COUNT(*) totcnt
		  FROM ASSETS_RENT_DETAIL_F D, ASSETS_RENT_F M
		 WHERE 1=1
  		   AND D.GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode#
		   AND D.GIS_ASSETS_CD = #gisAssetsCd#
		   AND D.GIS_ASSETS_SUB_CD = #gisAssetsSubCd#
   		   AND M.PRMISN_YN = 'Y'

		<isNotEmpty property="sUsagePdFrom" prepend="AND">
			<![CDATA[
			  	D.USAGE_PD_FROM >= TO_DATE(#sUsagePdFrom#, 'YYYY-MM-DD')
			]]>
		</isNotEmpty>
		<isNotEmpty property="sUsagePdTo" prepend="AND">
			<![CDATA[
				  D.USAGE_PD_FROM <= TO_DATE(#sUsagePdTo#, 'YYYY-MM-DD')
			]]>
		</isNotEmpty>
		   AND D.PRT_AT_CODE = M.PRT_AT_CODE
		   AND D.MNG_YEAR = M.MNG_YEAR
		   AND D.MNG_NO = M.MNG_NO
		   AND D.MNG_CNT = M.MNG_CNT

	</select>

<!-- 점검 관리 내역 -->

	<select id="gamFcltyUsageSttusInqireDao.selectQcMngList" parameterClass="GamFcltyUsageSttusInqireVO" resultClass="egovMap">
		SELECT A.*
			FROM (
				SELECT  ROWNUM RNUM, S.*
				  FROM (
						SELECT M.FCLTS_MNG_GROUP_NO AS FCLTS_MNG_GROUP_NO
							  ,D.FCLTS_MNG_NO AS FCLTS_MNG_NO
							  ,M.FCLTS_JOB_SE AS FCLTS_JOB_SE
							  ,GAM_GET_FCLTS_JOB_SE_NM(M.FCLTS_JOB_SE) AS FCLTS_JOB_NM
							  ,M.QC_MNG_SEQ AS QC_MNG_SEQ
							  ,M.ENFORCE_YEAR AS ENFORCE_YEAR
							  ,M.QC_MNG_NM AS QC_MNG_NM
							  ,TO_CHAR(M.QC_INSP_DT, 'YYYY-MM-DD') AS QC_INSP_DT
							  ,M.QC_INSP_SE AS QC_INSP_SE
							  ,M.QC_INSP_INSTT_NM AS QC_INSP_INSTT_NM
							  ,M.RESPON_ENGINEER_NM AS RESPON_ENGINEER_NM
							  ,TO_CHAR(M.QC_BEGIN_DT, 'YYYY-MM-DD') AS QC_BEGIN_DT
							  ,TO_CHAR(M.QC_END_DT, 'YYYY-MM-DD') AS QC_END_DT
							  ,M.QC_INSP_AMT AS QC_INSP_AMT
							  ,GAM_GET_STTUS_EVL_LVL_NM(M.STTUS_EVL_LVL) AS STTUS_EVL_LVL
							  ,M.QC_INSP_RESULT AS QC_INSP_RESULT
							  ,M.ACTION_CN AS ACTION_CN
							  ,M.RM AS RM


						  FROM QC_MNG_DTLS_F M, QC_MNG_OBJ_FCLTS_F D
 						 WHERE 1=1
 						 AND D.FCLTS_MNG_GROUP_NO = #fcltsMngGroupNo#
						 AND D.FCLTS_MNG_NO = #fcltsMngNo#

               			<isNotEmpty property="sUsagePdFrom" prepend="AND">
							<![CDATA[
								  M.QC_BEGIN_DT >= TO_DATE(#sUsagePdFrom#, 'YYYY-MM-DD')
							]]>
						</isNotEmpty>
						<isNotEmpty property="sUsagePdTo" prepend="AND">
							<![CDATA[
								  M.QC_BEGIN_DT <= TO_DATE(#sUsagePdTo#, 'YYYY-MM-DD')
							]]>
						</isNotEmpty>

						 AND M.FCLTS_MNG_GROUP_NO = D.FCLTS_MNG_GROUP_NO
						 AND M.FCLTS_JOB_SE = D.FCLTS_JOB_SE
						 AND M.QC_MNG_SEQ = D.QC_MNG_SEQ
 					) S
				) A
		<![CDATA[
		WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex#
		]]>
	</select>
<!-- 점검 관리 대상 시설물 -->
	<select id="gamFcltyUsageSttusInqireDao.selectQcMngObjFcltsList" parameterClass="GamFcltyUsageSttusInqireVO" resultClass="egovMap">
		SELECT A.*
			FROM (
				SELECT  ROWNUM RNUM, S.*
				  FROM (
		              SELECT FCLTS_MNG_NO AS FCLTS_MNG_NO
		                    ,GAM_GET_STTUS_EVL_LVL_NM(STTUS_EVL_LVL) AS STTUS_EVL_LVL
		                    ,TO_CHAR(QC_INSP_DT,'YYYY-MM-DD') AS QC_INSP_DT
		                    ,INSPECTOR AS INSPECTOR
		                    ,QC_INSP_RESULT AS QC_INSP_RESULT
		                    ,RM AS RM
		               FROM QC_MNG_OBJ_FCLTS_F
					  WHERE 1=1
					  	AND FCLTS_MNG_GROUP_NO = #fcltsMngGroupNo#
		                AND FCLTS_JOB_SE = #fcltsJobSe#
		                AND QC_MNG_SEQ = #qcMngSeq#
		                AND FCLTS_MNG_NO = #fcltsMngNo#
              		) S
         		 ) A
	</select>

<!-- 점검 관리 결과 항목 -->
	<select id="gamFcltyUsageSttusInqireDao.selectQcMngResultItemList" parameterClass="GamFcltyUsageSttusInqireVO" resultClass="egovMap">
		SELECT A.*
			FROM (
				SELECT  ROWNUM RNUM, S.*
				  FROM (
		              SELECT QC_ITEM_CD
		                    ,SEQ
		                    ,INSP_RESULT_CHK
		                    ,INSP_RESULT_CN
		               FROM QC_MNG_RESULT_ITEM_F
					  WHERE 1=1
					  	AND FCLTS_MNG_GROUP_NO = #fcltsMngGroupNo#
		                AND FCLTS_JOB_SE = #fcltsJobSe#
		                AND QC_MNG_SEQ = #qcMngSeq#
              		) S
         		 ) A
		<![CDATA[
		WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex#
		]]>
	</select>

	<!-- 유지보수 내역 -->
	<select id="gamFcltyUsageSttusInqireDao.selectMntnRprDtlsList" parameterClass="GamFcltyUsageSttusInqireVO" resultClass="egovMap">
		SELECT A.*
			FROM (
				SELECT  ROWNUM RNUM, S.*
				  FROM (
						SELECT M.FCLTS_MNG_GROUP_NO
							  ,M.MNTN_RPR_SEQ
							  ,M.FCLTS_JOB_SE AS FCLTS_JOB_SE
						      ,D.FCLTS_MNG_NO AS FCLTS_MNG_NO
						      ,M.ENFORCE_YEAR AS ENFORCE_YEAR
 						      ,GAM_GET_FCLTS_JOB_SE_NM(M.FCLTS_JOB_SE) AS FCLTS_JOB_NM
						      ,M.MNTN_RPR_PART AS MNTN_RPR_PART
						      ,M.MNTN_RPR_CN AS MNTN_RPR_CN
						      ,M.MNTN_RPR_BDGT AS MNTN_RPR_BDGT
						      ,M.MNTN_RPR_CNST_NM AS MNTN_RPR_CNST_NM
						      ,M.MNTN_RPR_CNST_START_DT AS MNTN_RPR_CNST_START_DT
						      ,M.MNTN_RPR_CNST_END_DT AS MNTN_RPR_CNST_END_DT
						      ,M.MNTN_RPR_CNST_AMT AS MNTN_RPR_CNST_AMT
						      ,M.PLANNER_NM AS PLANNER_NM
						      ,M.CNSTRTR AS CNSTRTR
						      ,M.CNST_CHARG_NM AS CNST_CHARG_NM
						      ,M.RM AS RM
						  FROM MNTN_RPR_DTLS_F M, MNTN_RPR_OBJ_FCLTS_F D
						 WHERE 1=1
						   AND D.FCLTS_MNG_GROUP_NO = #fcltsMngGroupNo#
				   		   AND D.FCLTS_MNG_NO = #fcltsMngNo#
			             	<isNotEmpty property="sUsagePdFrom" prepend="AND">
								<![CDATA[
									  M.MNTN_RPR_CNST_START_DT >= TO_DATE(#sUsagePdFrom#, 'YYYY-MM-DD')
								]]>
							</isNotEmpty>
							<isNotEmpty property="sUsagePdTo" prepend="AND">
								<![CDATA[
									  M.MNTN_RPR_CNST_START_DT <= TO_DATE(#sUsagePdTo#, 'YYYY-MM-DD')
								]]>
							</isNotEmpty>

						   AND M.FCLTS_JOB_SE = D.FCLTS_JOB_SE
						   AND M.FCLTS_MNG_GROUP_NO = D.FCLTS_MNG_GROUP_NO
						   AND M.MNTN_RPR_SEQ = D.MNTN_RPR_SEQ

 				) S
			) A
		<![CDATA[
		WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex#
		]]>
	</select>

	<!-- 유지보수 대상 시설물 -->
	<select id="gamFcltyUsageSttusInqireDao.selectMntnRprObjFcltsList" parameterClass="GamFcltyUsageSttusInqireVO" resultClass="egovMap">
		SELECT A.*
			FROM (
				SELECT  ROWNUM RNUM, S.*
				  FROM (
						SELECT MNTN_RPR_CNST_MTH
						      ,UNIT
						      ,QY
						      ,PRICE
						      ,MNTN_RPR_CNST_AMT
						      ,RM
						  FROM MNTN_RPR_OBJ_FCLTS_F-
						 WHERE 1=1
						   AND FCLTS_MNG_GROUP_NO = #fcltsMngGroupNo#
						   AND FCLTS_JOB_SE = #fcltsJobSe#
						   AND MNTN_RPR_SEQ = #mntnRprSeq#
						   AND FCLTS_MNG_NO = #fcltsMngNo#
 				) S
			) A
		<![CDATA[
		WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex#
		]]>
	</select>

<!-- 하자 보수 내역 -->
	<select id="gamFcltyUsageSttusInqireDao.selectFlawList" parameterClass="GamFcltyUsageSttusInqireVO" resultClass="egovMap">
		SELECT A.*
			FROM (
				SELECT  ROWNUM RNUM, S.*
				  FROM (
						SELECT M.FCLTS_MNG_GROUP_NO AS FCLTS_MNG_GROUP_NO
							 , D.FCLTS_MNG_NO AS FCLTS_MNG_NO
							 , M.FCLTS_JOB_SE AS FCLTS_JOB_SE
							 , GAM_GET_FCLTS_JOB_SE_NM(M.FCLTS_JOB_SE) AS FCLTS_JOB_NM
							 , M.FLAW_RPR_SEQ AS FLAW_RPR_SEQ
							 , GAM_GET_FLAW_EXAM_SE_NM(M.FLAW_EXAM_SE) AS FLAW_EXAM_SE
							 , M.FLAW_EXAM_DT AS FLAW_EXAM_DT
							 , M.FLAW_ENNC AS FLAW_ENNC
							 , M.FLAW_EXAM_RESULT AS FLAW_EXAM_RESULT
							 , M.ENFORCE_YEAR AS ENFORCE_YEAR
							 , M.FLAW_RPR_NM AS FLAW_RPR_NM
							 , GAM_GET_FLAW_RPR_TY_NM(M.FLAW_RPR_TY) AS FLAW_RPR_TY
							 , M.FLAW_OCCRRNC_DT AS FLAW_OCCRRNC_DT
							 , M.FLAW_RPR_ENTRPS_NM AS FLAW_RPR_ENTRPS_NM
							 , M.FLAW_RPR_CONTENTS AS FLAW_RPR_CONTENTS
							 , DECODE(M.FLAW_RPR_COMPT_YN,'Y','완료','미완료') AS FLAW_RPR_COMPT_YN
							 , M.RM AS RM

						  FROM FLAW_RPR_DTLS_F M, FLAW_RPR_OBJ_FCLTS_F D
<!--
						 WHERE 1=1
						   AND M.FCLTS_MNG_GROUP_NO = D.FCLTS_MNG_GROUP_NO(+)
						   AND M.FCLTS_JOB_SE = D.FCLTS_JOB_SE(+)
						   AND M.FLAW_RPR_SEQ = D.FLAW_RPR_SEQ(+)
 -->
 				 WHERE 1=1
 				   AND D.FCLTS_MNG_GROUP_NO = #fcltsMngGroupNo#
				   AND D.FCLTS_MNG_NO = #fcltsMngNo#
	             	<isNotEmpty property="sUsagePdFrom" prepend="AND">
						<![CDATA[
							  M.FLAW_RPR_START_DT >= TO_DATE(#sUsagePdFrom#, 'YYYY-MM-DD')
						]]>
					</isNotEmpty>
					<isNotEmpty property="sUsagePdTo" prepend="AND">
						<![CDATA[
							  M.FLAW_RPR_START_DT <= TO_DATE(#sUsagePdTo#, 'YYYY-MM-DD')
						]]>
					</isNotEmpty>
				   AND M.FCLTS_MNG_GROUP_NO = D.FCLTS_MNG_GROUP_NO
				   AND M.FCLTS_JOB_SE = D.FCLTS_JOB_SE
				   AND M.FLAW_RPR_SEQ = D.FLAW_RPR_SEQ
 				) S
			) A
		<![CDATA[
		WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex#
		]]>
	</select>

<!-- 하자보수 대상 시설물 -->
	<select id="gamFcltyUsageSttusInqireDao.selectFlawRprObjFcltsList" parameterClass="GamFcltyUsageSttusInqireVO" resultClass="egovMap">
		SELECT A.*
			FROM (
				SELECT  ROWNUM RNUM, S.*
				  FROM (
					SELECT FLAW_EXAM_DT AS FLAW_EXAM_DT
					     , FLAW_ENNC AS FLAW_ENNC
					     , FLAW_EXAM_RESULT AS FLAW_EXAM_RESULT
					     , RM AS RM
					  FROM FLAW_RPR_OBJ_FCLTS_F
					 WHERE 1=1
					   AND FCLTS_MNG_GROUP_NO = #fcltsMngGroupNo#
					   AND FCLTS_JOB_SE = #fcltsJobSe#
					   AND FLAW_RPR_SEQ = #flawRprSeq#
					   AND FCLTS_MNG_NO = #fcltsMngNo#
 				) S
			) A
		<![CDATA[
		WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex#
		]]>

	</select>


	<!-- 하자 검사자 -->
	<select id="gamFcltyUsageSttusInqireDao.selectFlawExamUsrList" parameterClass="GamFcltyUsageSttusInqireVO" resultClass="egovMap">
		SELECT A.*
			FROM (
				SELECT  ROWNUM RNUM, S.*
				  FROM (
					SELECT FLAW_EXAM_USR AS FLAW_EXAM_USR
					     , FLAW_EXAM_DT AS FLAW_EXAM_DT
					     , DECODE(FLAW_EXAM_COMPT_YN,'Y','완료','미완료')
					  FROM FLAW_EXAM_USR_F
					 WHERE 1=1
					   AND FCLTS_MNG_GROUP_NO = #fcltsMngGroupNo#
					   AND FCLTS_JOB_SE = #fcltsJobSe#
					   AND FLAW_RPR_SEQ = #flawRprSeq#
 				) S
			) A
		<![CDATA[
		WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex#
		]]>
	</select>



</sqlMap>

<!--
	<resultMap id="GamFcltyUsageMngMap" class="egov framework.rte.ygpa.gam.ctrt.service.GamFcltyUsageSttusInqireVO">
		<result property="prtAtCode" column="PRT_AT_CODE" columnIndex="1" />
		<result property="mngYearNo" column="MNG_YEAR_NO" columnIndex="2" />
		<result property="gisAssets" column="GIS_ASSETS" columnIndex="3" />
		<result property="docNo" column="DOC_NO" columnIndex="4" />
		<result property="nticMth" column="NTIC_MTH" columnIndex="5" />
		<result property="usagePurps" column="USAGE_PURPS" columnIndex="6" />
		<result property="usageDtls" column="USAGE_DTLS" columnIndex="7" />
		<result property="usageAr" column="USAGE_AR" columnIndex="8" />
		<result property="fee" column="FRR" columnIndex="9" />
		<result property="prmisnDt" column="PRMISN_DT" columnIndex="10" />
	</resultMap>
 -->

<!-- GIS 항만 시설코드
SELECT GIS_ASSETS_PRT_AT_CODE||'-'||GIS_ASSETS_CD||'-'||GIS_ASSETS_SUB_CD AS GIS_ASSETS
      ,GAM_GETCODENAME('GAM003', PRT_FCLTY_SE) AS PRT_FCLTY_SE
      ,PRT_FCLTY_NM AS PRT_FCLTY_NM
      ,PRT_FCLTY_STNDRD AS PRT_FCLTY_STNDRD
      ,PRT_FCLTY_UNIT AS PRT_FCLTY_UNIT
      ,TO_CHAR(PRT_FCLTY_INSTL_DT, 'YYYY-MM-DD') AS PRT_FCLTY_INSTL_DT
      ,TO_CHAR(PRT_FCLTY_CHANGE_DT, 'YYYY-MM-DD') AS PRT_FCLTY_CHANGE_DT
      ,GAM_GETENTRPSNM(PRT_FCLTY_MNG_ENTRPS_CD,'1') AS PRT_FCLTY_MNG_ENTRPS
      ,TO_CHAR(PRT_FCLTY_EXPR_DT, 'YYYY-MM-DD') AS PRT_FCLTY_EXPR_DT
      ,PRT_PRT_FCLTY_CNT AS PRT_PRT_FCLTY_CNT
      ,PRT_PRT_FCLTY_MNGER AS PRT_PRT_FCLTY_MNGER
      ,FCLTS_MNG_GROUP_NO AS FCLTS_MNG_GROUP_NO
  FROM GIS_PRT_FCLTY_CD_F
 WHERE PRT_FCLTY_STNDRD IS NOT NULL

 -->