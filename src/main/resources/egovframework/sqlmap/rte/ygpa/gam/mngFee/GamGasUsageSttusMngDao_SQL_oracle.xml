<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="ygpa.gam.mngFee">

    <typeAlias alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
    <typeAlias alias="hashMap" type="java.util.HashMap"/>
    <typeAlias alias="gamGasUsageSttusMngVo" type="egovframework.rte.ygpa.gam.mngFee.service.GamGasUsageSttusMngVo"/>

    <select id="gamGasUsageSttusMngDao.selectGasUsageSttusMngList_D" parameterClass="gamGasUsageSttusMngVo" resultClass="egovMap">
     SELECT A.*
           FROM (
                   SELECT  ROWNUM RNUM, S.*
                     FROM (
                            SELECT
									USAGE_MT,
									PREV_MT_USAGE_QY,
									SAID_MT_USAGE_QY,
									APPLC_COEF,
									NET_USAGE_QY,
									REG_USR,
									TO_CHAR(REGIST_DT, 'YYYY-MM-DD') REGIST_DT,
									UPD_USR,
									TO_CHAR(UPDT_DT, 'YYYY-MM-DD') UPDT_DT,
									MNG_FEE_FCLTY_CD,
									MNG_FEE_JOB_SE
					        FROM GAS_USAGE_STTUS_F
								  WHERE 1=1
						         <isNotEmpty property="sUsageMt">
						             <![CDATA[  AND USAGE_MT LIKE '%' || #sUsageMt# || '%' ]]>
						         </isNotEmpty>

						         <isNotEmpty property="sMngFeeFcltyCd">
							         AND MNG_FEE_FCLTY_CD LIKE '%' || #sMngFeeFcltyCd# || '%'
							     </isNotEmpty>

							     <isNotEmpty property="sMngFeeJobSe">
							          AND MNG_FEE_JOB_SE LIKE '%' || #sMngFeeJobSe# || '%'
							     </isNotEmpty>
                             ORDER BY USAGE_MT
                ) S
             ) A
        <![CDATA[ WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex# ]]>
    </select>

    <select id="gamGasUsageSttusMngDao.selectGasUsageSttusMngListTotCnt_S" parameterClass="gamGasUsageSttusMngVo" resultClass="int">
         SELECT COUNT(*) totcnt
              FROM GAS_USAGE_STTUS_F
                           <![CDATA[  WHERE 1=1 ]]>

						         <isNotEmpty property="sUsageMt">
						             <![CDATA[  AND USAGE_MT LIKE '%' || #sUsageMt# || '%' ]]>
						         </isNotEmpty>

						         <isNotEmpty property="sMngFeeFcltyCd">
							         AND MNG_FEE_FCLTY_CD LIKE '%' || #sMngFeeFcltyCd# || '%'
							     </isNotEmpty>

							     <isNotEmpty property="sMngFeeJobSe">
							          AND MNG_FEE_JOB_SE LIKE '%' || #sMngFeeJobSe# || '%'
							     </isNotEmpty>

    </select>

	<insert id="gamGasUsageSttusMngDao.InsertGasUsageSttusMng">
		<![CDATA[
		    INSERT
		      INTO  GAS_USAGE_STTUS_F
		         (
		         	USAGE_MT
					,PREV_MT_USAGE_QY
					,SAID_MT_USAGE_QY
					,APPLC_COEF
					,NET_USAGE_QY
					,REG_USR
					,REGIST_DT
					,MNG_FEE_FCLTY_CD
					,MNG_FEE_JOB_SE
		         )
		    VALUES
		         (
		         	#usageMt#
					,#prevMtUsageQy#
					,#saidMtUsageQy#
					,#applcCoef#
					,#netUsageQy#
					,#regUsr#
					,TO_DATE(sysdate,'YYYY-MM-DD')
					,#mngFeeFcltyCd#
					,#mngFeeJobSe#
		         )
		]]>
	</insert>

	<update id="gamGasUsageSttusMngDao.updateElctyUsageSttusMng">
		<![CDATA[
            UPDATE CAR_INFO_F SET
			       	CAR_REGIST_NO	=	#carRegistNo#
				,	CAR_KND	=	#carKnd#
				,	CAR_PRPOS	=	#carPrpos#
				,	CAR_NM	=	#carNm#
				,	CAR_FMT	=	#carFmt#
				,	CAR_YR_MDL	=	#carYrMdl#
				,	MAX_CAPA_QY	=	#maxCapaQy#
				,	CYLINDER_CNT	=	#cylinderCnt#
				,	FUEL_KND	=	#fuelKnd#
				,	FUEL_EFFT	=	#fuelEfft#
				,	EXAM_VALID_BEGIN_DT	=	#examValidBeginDt#
				,	EXAM_VALID_END_DT	=	#examValidEndDt#
				,	ACQ_PRCE	=	#acqPrce#
				,	UPD_USR	=	#updUsr#
				,	UPDT_DT	=	sysdate
					WHERE  CAR_REGIST_NO     = #oldCarRegistNo#
		]]>
	</update>

	<delete id="gamGasUsageSttusMngDao.DeleteGasUsageSttusMng">
		<![CDATA[
            DELETE  GAS_USAGE_STTUS_F
		             WHERE  USAGE_MT   = #usageMt#
		             AND 	MNG_FEE_FCLTY_CD	= #mngFeeFcltyCd#
		             AND 	MNG_FEE_JOB_SE	=	#mngFeeJobSe#
		]]>
	</delete>

   </sqlMap>