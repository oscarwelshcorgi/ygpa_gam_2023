<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">
<!-- SQL MAP 정의 -->
<sqlMap namespace="ygpa.gam.fclty">
	<!-- TYPE ALIAS 정의 -->
	<typeAlias alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias alias="hashMap" type="java.util.HashMap"/>

	<typeAlias alias="gamRoadIncidentMngVO" type="egovframework.rte.ygpa.gam.fclty.service.GamRoadIncidentMngVO" />

	<!-- RESULT MAP 정의 -->
<!-- 	<resultMap id="gamInfoCommFcltySpecInqireSumMap" class="GamInfoCommFcltySpecInqireVO">
		<result property="totalCount" column="TOTAL_COUNT" columnIndex="1"/>
		<result property="sumQy" column="SUM_QY" columnIndex="2"/>
		<result property="sumAcqAmt" column="SUM_ACQ_AMT" columnIndex="3"/>
	</resultMap>
 -->

	<select id="GamRoadIncidentMngDao.selectRoadIncidentMngList" parameterClass="gamRoadIncidentMngVO" resultClass="egovMap">
		SELECT ROWNUM RNUM, S.*
		  FROM(
				SELECT T2.GIS_PRT_FCLTY_CD
				        ,T2.PRT_FCLTY_NM
				        ,T2.PRT_PRT_FCLTY_MNGER
				        ,GAM_GETCODENAME('GAM070',T2.GIS_PRT_FCLTY_CD) AS GIS_PRT_FCLTY_CD_NM
				        ,GAM_GETCODENAME('GAM019',T2.GIS_ASSETS_PRT_AT_CODE) AS GIS_ASSETS_PRT_AT_CODE_NM
				        ,GAM_GET_FCLTS_MNG_GROUP_NM(T2.FCLTS_MNG_GROUP_NO) AS FCLTS_MNG_GROUP_NM
				        ,T3.LOC AS PRT_LOC
				        ,T4.OWNER
				        ,T1.YEAR
				        ,T1.SN
				        ,T1.FCLTS_MNG_GROUP_NO
				        ,T1.FCLTS_MNG_NO
				        ,T1.TRAFFIC_ACCIDENT
				        ,T1.DEAD
				        ,T1.SLANDER
				        ,T1.SLIGHT_MISHAP
				        ,T1.LOC
				        ,T1.PHOTO
				        
				  FROM ROAD_INCIDENT T1
				    INNER JOIN GIS_PRT_FCLTY_CD_F T2 ON(T1.fclts_mng_no = T2.fclts_mng_no)
				    LEFT OUTER JOIN CVL_ENG_FCLTY_SPEC_F T3 ON (T2.FCLTS_MNG_NO=T3.FCLTS_MNG_NO)
				    LEFT OUTER JOIN FCLTS_MNG_GROUP_F T4 ON (T1.FCLTS_MNG_GROUP_NO=T4.FCLTS_MNG_GROUP_NO)
				 WHERE 1=1
				) S
	</select>

	<select id="GamRoadIncidentMngDao.selectRoadIncidentMngDetailList" parameterClass="gamRoadIncidentMngVO" resultClass="egovMap">
		SELECT	T1.YEAR
				,T1.SN
				,T1.FCLTS_MNG_GROUP_NO
				,GAM_GET_FCLTS_MNG_GROUP_NM(T1.FCLTS_MNG_GROUP_NO) AS FCLTS_MNG_GROUP_NM
				,T1.FCLTS_MNG_NO
                ,T2.PRT_FCLTY_NM AS FCLTS_MNG_NM
				,T1.TRAFFIC_ACCIDENT
				,T1.DEAD
				,T1.SLANDER
				,T1.SLIGHT_MISHAP
				,T1.LOC
				,T1.PHOTO
		  FROM ROAD_INCIDENT T1
		  LEFT OUTER JOIN GIS_PRT_FCLTY_CD_F T2 ON (T1.FCLTS_MNG_NO=T2.FCLTS_MNG_NO)
		 WHERE 1=1  
	</select>
	
	
	

</sqlMap>
