<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="ygpa.gam.fclty">

    <typeAlias alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
    <typeAlias alias="hashMap" type="java.util.HashMap"/>
    <typeAlias alias="comDefaultVO" type="egovframework.com.cmm.ComDefaultVO"/>
    <typeAlias alias="gamConsFcltySpecMngVO" type="egovframework.rte.ygpa.gam.fclty.service.GamConsFcltySpecMngVO"/>

    <insert id="gamConsFcltySpecMngDao.insertFcltySpec">
		<![CDATA[
			INSERT INTO ARCH_FCLTY_SPEC_F
			(
				BLD_DT
				, FLAW_END_DT
				, BASE_FMT
				, STRCT_FMT
				, AR
				, ARCH_AR
				, PLOT_AR
				, MAIN_USAGE_PRPOS
				, PRK_AR
				, ISD_PRK_AR
				, OSD_PRK_AR
				, PRK_CNT
				, ISD_PRK_CNT
				, OSD_PRK_CNT
				, EXHAUST_DUCT_ENNC
				, VNTLTN_ARCNDT_MTHD
				, WRT_TANK_LOC
				, SBT_LOC
				, OIL_SAVEFCLTY_LOC
				, SWG_CLUPFCLTY_LOC
				, LIFT_CNT_PSNGR
				, LIFT_CNT_CARGO
				, LIFT_CNT_EMGCY
				, LIFT_OPER_MTHD
				, CLNG_ENNC
				, CLNG_SRC
				, HTNG_ENNC
				, HTNG_SRC
				, SPICTANK_FMT
				, ELCTY_LEAD_IN_CAPA
				, FCG
				, ITR
				, CEIL
				, ROOF
				, ROOF_WTPRF
				, PLAN_CNST_NM
				, PLAN_EXC_CMPNY
				, PLAN_BEGIN_DT
				, PLAN_END_DT
				, CNSTRCT_CNST_NM
				, CNSTRCT_EXC_CMPNY
				, CNSTRCT_BEGIN_DT
				, CNSTRCT_END_DT
				, RM
				, REG_USR
				, REGIST_DT
				, UPD_USR
				, UPDT_DT
				, FCLTS_MNG_NO
				, LOC
				, ARCH_FCLTS_CL_CD
			)
			VALUES
			(
				#bldDt#
				, #flawEndDt#
				, #baseFmt#
				, #strctFmt#
				, #ar#
				, #archAr#
				, #plotAr#
				, #mainUsagePrpos#
				, #prkAr#
				, #isdPrkAr#
				, #osdPrkAr#
				, #prkCnt#
				, #isdPrkCnt#
				, #osdPrkCnt#
				, #exhaustDuctEnnc#
				, #vntltnArcndtMthd#
				, #wrtTankLoc#
				, #sbtLoc#
				, #oilSavefcltyLoc#
				, #swgClupfcltyLoc#
				, #liftCntPsngr#
				, #liftCntCargo#
				, #liftCntEmgcy#
				, #liftOperMthd#
				, #clngEnnc#
				, #clngSrc#
				, #htngEnnc#
				, #htngSrc#
				, #spictankFmt#
				, #elctyLeadInCapa#
				, #fcg#
				, #itr#
				, #ceil#
				, #roof#
				, #roofWtprf#
				, #planCnstNm#
				, #planExcCmpny#
				, #planBeginDt#
				, #planEndDt#
				, #cnstrctCnstNm#
				, #cnstrctExcCmpny#
				, #cnstrctBeginDt#
				, #cnstrctEndDt#
				, #rm#
				, #regUsr#
				, #registDt#
				, #updUsr#
				, #updtDt#
				, #gisAssetsPrtAtCode# || #gisAssetsCd# || #gisAssetsSubCd# || #gisPrtFcltyCd# || #gisPrtFcltySeq# || #prtFcltySe#
				, #loc#
				, #archFcltsClCd#
			)
		]]>
	</insert>

    <select id="gamConsFcltySpecMngDao.selectFcltySpecMngList" parameterClass="comDefaultVO" resultClass="egovMap">
         /* egovframework.rte.ygpa.gam.fclty.service.GamFcltySpecMngDao_SQL_oracle.selectList */
		SELECT *
		  FROM
		       (SELECT Z.*,
		              ROWNUM AS RNUM
		         FROM
		              (
		              	SELECT
		              			F.GIS_ASSETS_CD
		              			, F.GIS_ASSETS_CD ||'-'|| F.GIS_ASSETS_SUB_CD AS GIS_ASSETS_DISPLAY
		              			, GIS_PRT_FCLTY_CD ||'-'|| GIS_PRT_FCLTY_SEQ AS GIS_PRT_FCLTY_DISPLAY
			                    , F.GIS_ASSETS_PRT_AT_CODE
			                    , (SELECT CODE_NM FROM COMTCCMMNDETAILCODE WHERE CODE_ID = 'GAM019' AND CODE = F.GIS_ASSETS_PRT_AT_CODE) AS GIS_ASSETS_PRT_AT_NAME
			                    , F.GIS_ASSETS_SUB_CD
			                    , F.GIS_PRT_FCLTY_CD
			                    , F.GIS_PRT_FCLTY_SEQ
			                    , F.PRT_FCLTY_NM
			                    , A.GIS_ASSETS_LOC_CD
			                    , F.PRT_FCLTY_STNDRD
			                    , F.PRT_FCLTY_UNIT
			                    , TO_CHAR(TO_DATE(PRT_FCLTY_INSTL_DT) , 'yyyy-mm-dd')  PRT_FCLTY_INSTL_DT
                                , TO_CHAR(TO_DATE(PRT_FCLTY_CHANGE_DT) , 'yyyy-mm-dd')  PRT_FCLTY_CHANGE_DT
			                    , F.PRT_FCLTY_SE
			                    , (SELECT ENTRPS_NM FROM ENTRPS_INFO_F WHERE ENTRPSCD = F.PRT_FCLTY_MNG_ENTRPS_CD) PRT_FCLTY_MNG_ENTRPS_NM
			                    , F.PRT_FCLTY_MNG_ENTRPS_CD
			                    , F.PRT_FCLTY_GIS_CD
								, A.GIS_ASSETS_NM
                                , A.GIS_ASSETS_LOCPLC
		       					, A.GIS_ASSETS_LNM
		       					, A.GIS_ASSETS_LNM_SUB
   								, F.LA_CRDNT
								, F.LO_CRDNT
   								, F.LAT
								, F.LNG
								, F.GIS_ASSETS_PRT_AT_CODE AS GIS_ASSETS_PRT_AT_CODE_STR
			                    , GAM_GETCODENAME('GAM002', A.GIS_ASSETS_LOC_CD) GIS_ASSETS_LOC_NM
			                    , DECODE(F.GIS_PRT_FCLTY_CD,'10','광양','11','여수','기타') PRT_FCLTY_SE_NM
			                    , F.PRT_PRT_FCLTY_MNGER PRT_PRT_FCLTY_MNGER
			                    , F.INFO INFO
		                FROM GIS_PRT_FCLTY_CD_F F, GIS_ASSETS_CD_F A
		                WHERE 1 = 1
                        AND F.GIS_ASSETS_CD = A.GIS_ASSETS_CD
                        AND F.GIS_ASSETS_SUB_CD = A.GIS_ASSETS_SUB_CD
                        AND F.GIS_ASSETS_PRT_AT_CODE = A.GIS_ASSETS_PRT_AT_CODE
		                AND F.PRT_FCLTY_SE = #prtFcltySe#
		                <isNotEmpty property="searchPrtAtCode">
	           				AND F.GIS_ASSETS_PRT_AT_CODE = #searchPrtAtCode#
	           			</isNotEmpty>
		                <isNotEmpty property="searchAssetsCd">
	           				AND F.GIS_ASSETS_CD = #searchAssetsCd#
	           			</isNotEmpty>
		                <isNotEmpty property="searchAssetsSubCd">
	           				AND F.GIS_ASSETS_SUB_CD = #searchAssetsSubCd#
	           			</isNotEmpty>
		                <isNotEmpty property="searchFcltyCd">
	           				AND F.GIS_PRT_FCLTY_CD = #searchFcltyCd#
	           			</isNotEmpty>
		                <isNotEmpty property="searchFcltySeq">
	           				AND F.GIS_PRT_FCLTY_SEQ = #searchFcltySeq#
	           			</isNotEmpty>
		                <isNotEmpty property="searchKeyword">
	           				AND F.PRT_FCLTY_NM LIKE '%' || #searchKeyword# || '%'
	           			</isNotEmpty>
		            ORDER BY F.GIS_ASSETS_CD DESC ,
		                     F.GIS_ASSETS_PRT_AT_CODE DESC ,
		                     F.GIS_ASSETS_SUB_CD DESC ,
		                     F.GIS_PRT_FCLTY_CD DESC ,
		                     F.GIS_PRT_FCLTY_SEQ DESC
		              )Z
		       )
	     <![CDATA[ WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex# ]]>
    </select>

    <select id="gamConsFcltySpecMngDao.selectFcltySpecMngListTotCnt" parameterClass="comDefaultVO" resultClass="int">
            SELECT COUNT(*) totcnt
             FROM GIS_PRT_FCLTY_CD_F F, GIS_ASSETS_CD_F A
             WHERE 1 = 1
			 AND F.GIS_ASSETS_CD = A.GIS_ASSETS_CD
             AND F.GIS_ASSETS_SUB_CD = A.GIS_ASSETS_SUB_CD
             AND F.GIS_ASSETS_PRT_AT_CODE = A.GIS_ASSETS_PRT_AT_CODE
             AND PRT_FCLTY_SE = #prtFcltySe#
             <isNotEmpty property="searchPrtAtCode">
           		AND F.GIS_ASSETS_PRT_AT_CODE = #searchPrtAtCode#
           	</isNotEmpty>
	        <isNotEmpty property="searchAssetsCd">
           		AND F.GIS_ASSETS_CD = #searchAssetsCd#
           	</isNotEmpty>
	        <isNotEmpty property="searchAssetsSubCd">
           		AND F.GIS_ASSETS_SUB_CD = #searchAssetsSubCd#
           	</isNotEmpty>
	        <isNotEmpty property="searchFcltyCd">
           		AND F.GIS_PRT_FCLTY_CD = #searchFcltyCd#
           	</isNotEmpty>
	        <isNotEmpty property="searchFcltySeq">
           		AND F.GIS_PRT_FCLTY_SEQ = #searchFcltySeq#
           	</isNotEmpty>
	        <isNotEmpty property="searchKeyword">
           		AND PRT_FCLTY_NM LIKE '%' || #searchKeyword# || '%'
           	</isNotEmpty>
    </select>

    <select id="gamConsFcltySpecMngDao.selectFcltySpecMngPhotoList" parameterClass="gamConsFcltySpecMngVO" resultClass="egovMap">
		SELECT *
		  FROM
		       (SELECT Z.*,
		              ROWNUM AS RNUM
		         FROM
		              (SELECT GIS_ASSETS_CD,
		                     GIS_ASSETS_PRT_AT_CODE,
		                     GIS_ASSETS_SUB_CD,
		                     GIS_PRT_FCLTY_CD,
		                     GIS_PRT_FCLTY_SEQ,
		                     PRT_FCLTY_PHOTO_SEQ,
		                     PRT_FCLTY_SE,
		                     PHOTO_SJ,
		                     FILENM_PHYSICL,
		                     FILENM_LOGIC,
		                     TO_CHAR(SHOT_DT,'YYYY-MM-DD') AS SHOT_DT,
		                     REG_USR,
		                     REGIST_DT,
		                     PHOTO_DESC
		                FROM PRT_FCLTY_PHOTO_F
		                WHERE GIS_PRT_FCLTY_CD = #gisPrtFcltyCd#
                     	AND GIS_PRT_FCLTY_SEQ = #gisPrtFcltySeq#
                     	AND GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode#
                     	AND GIS_ASSETS_CD = #gisAssetsCd#
                     	AND GIS_ASSETS_SUB_CD = #gisAssetsSubCd#
                     	AND PRT_FCLTY_SE = #prtFcltySe#
		            ORDER BY GIS_ASSETS_CD DESC ,
		                     GIS_ASSETS_PRT_AT_CODE DESC ,
		                     GIS_ASSETS_SUB_CD DESC ,
		                     GIS_PRT_FCLTY_CD DESC ,
		                     GIS_PRT_FCLTY_SEQ DESC ,
		                     PRT_FCLTY_PHOTO_SEQ DESC ,
		                     PRT_FCLTY_SE DESC
		              )Z
		       )
	     <![CDATA[ WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex# ]]>
    </select>

    <select id="gamConsFcltySpecMngDao.selectFcltySpecMngPhotoListTotCnt" parameterClass="gamConsFcltySpecMngVO" resultClass="int">
            SELECT COUNT(*) totcnt
             FROM PRT_FCLTY_PHOTO_F
             WHERE GIS_PRT_FCLTY_CD = #gisPrtFcltyCd#
           	 AND GIS_PRT_FCLTY_SEQ = #gisPrtFcltySeq#
           	 AND GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode#
           	 AND GIS_ASSETS_CD = #gisAssetsCd#
           	 AND GIS_ASSETS_SUB_CD = #gisAssetsSubCd#
           	 AND PRT_FCLTY_SE = #prtFcltySe#
    </select>

    <select id="gamConsFcltySpecMngDao.insertFcltyGetSeq" resultClass="String">
    	SELECT LPAD(NVL(MAX(GIS_PRT_FCLTY_SEQ),0) + 1,'4','0') GIS_PRT_FCLTY_SEQ
  			FROM GIS_PRT_FCLTY_CD_F
    </select>

	<select id="gamConsFcltySpecMngDao.fcltyMngSelectView" resultClass="egovMap" parameterClass="hashMap" >
	    /* egovframework.rte.ygpa.gam.fclty.service.GamFcltySpecMngDao_SQL_oracle.select */
		SELECT 
				C.GIS_ASSETS_PRT_AT_CODE AS GIS_ASSETS_PRT_AT_CODE_STR
				, (SELECT CODE_NM FROM COMTCCMMNDETAILCODE WHERE CODE_ID = 'GAM019' AND CODE = C.GIS_ASSETS_PRT_AT_CODE) AS GIS_ASSETS_PRT_AT_NAME
				, C.GIS_ASSETS_CD
				, C.GIS_ASSETS_SUB_CD
				, C.GIS_ASSETS_PRT_AT_CODE
				, P.GIS_ASSETS_NM
				, P.GIS_ASSETS_LNM
				, P.GIS_ASSETS_LNM_SUB
				, P.GIS_ASSETS_LOCPLC
				, C.GIS_PRT_FCLTY_CD
				, C.GIS_PRT_FCLTY_SEQ
				, GAM_GETCODENAME('GAM058', C.GIS_PRT_FCLTY_CD) PRT_FCLTY_SE_NM
				, C.PRT_FCLTY_NM
				, C.FCLTS_MNG_NO
				, TO_CHAR(S.BLD_DT,'YYYY-MM-DD') AS BLD_DT
				, TO_CHAR(S.FLAW_END_DT,'YYYY-MM-DD') AS FLAW_END_DT
				, S.BASE_FMT
				, S.STRCT_FMT
				, S.AR
				, S.ARCH_AR
				, S.PLOT_AR
				, S.MAIN_USAGE_PRPOS
				, S.PRK_AR
				, S.ISD_PRK_AR
				, S.OSD_PRK_AR
				, S.PRK_CNT
				, S.ISD_PRK_CNT
				, S.OSD_PRK_CNT
				, S.EXHAUST_DUCT_ENNC
				, S.VNTLTN_ARCNDT_MTHD
				, S.WRT_TANK_LOC
				, S.SBT_LOC
				, S.OIL_SAVEFCLTY_LOC
				, S.SWG_CLUPFCLTY_LOC
				, S.LIFT_CNT_PSNGR
				, S.LIFT_CNT_CARGO
				, S.LIFT_CNT_EMGCY
				, S.LIFT_OPER_MTHD
				, S.CLNG_ENNC
				, S.CLNG_SRC
				, S.HTNG_ENNC
				, S.HTNG_SRC
				, S.SPICTANK_FMT
				, S.ELCTY_LEAD_IN_CAPA
				, S.FCG
				, S.ITR
				, S.CEIL
				, S.ROOF
				, S.ROOF_WTPRF
				, S.PLAN_CNST_NM
				, S.PLAN_EXC_CMPNY
				, TO_CHAR(S.PLAN_BEGIN_DT,'YYYY-MM-DD') AS PLAN_BEGIN_DT
				, TO_CHAR(S.PLAN_END_DT,'YYYY-MM-DD') AS PLAN_END_DT
				, S.CNSTRCT_CNST_NM
				, S.CNSTRCT_EXC_CMPNY
				, TO_CHAR(S.CNSTRCT_BEGIN_DT,'YYYY-MM-DD') AS CNSTRCT_BEGIN_DT
				, TO_CHAR(S.CNSTRCT_END_DT,'YYYY-MM-DD') AS CNSTRCT_END_DT
				, S.RM
				, S.REG_USR
				, TO_CHAR(S.REGIST_DT,'YYYY-MM-DD') AS REGIST_DT
				, S.UPD_USR
				, S.UPDT_DT
				, S.FCLTS_MNG_NO
				, S.LOC
				, S.ARCH_FCLTS_CL_CD
		  FROM GIS_PRT_FCLTY_CD_F C,
		       GIS_ASSETS_CD_F P,
		       ARCH_FCLTY_SPEC_F S
		 WHERE P.GIS_ASSETS_PRT_AT_CODE = C.GIS_ASSETS_PRT_AT_CODE
		       AND P.GIS_ASSETS_SUB_CD = C.GIS_ASSETS_SUB_CD
		       AND P.GIS_ASSETS_CD = C.GIS_ASSETS_CD
		       AND C.FCLTS_MNG_NO = S.FCLTS_MNG_NO 
		 	   AND C.GIS_ASSETS_CD = #gisAssetsCd#
		       AND C.GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode#
		       AND C.GIS_ASSETS_SUB_CD = #gisAssetsSubCd#
		       AND C.GIS_PRT_FCLTY_CD = #gisPrtFcltyCd#
		       AND C.GIS_PRT_FCLTY_SEQ = #gisPrtFcltySeq#
  	</select>
  	
  	<select id="gamConsFcltySpecMngDao.fcltySpecMngSelectView" resultClass="egovMap" parameterClass="hashMap" >

		SELECT 
				BLD_DT
				, FLAW_END_DT
				, BASE_FMT
				, STRCT_FMT
				, AR
				, ARCH_AR
				, PLOT_AR
				, MAIN_USAGE_PRPOS
				, PRK_AR
				, ISD_PRK_AR
				, OSD_PRK_AR
				, PRK_CNT
				, ISD_PRK_CNT
				, OSD_PRK_CNT
				, EXHAUST_DUCT_ENNC
				, VNTLTN_ARCNDT_MTHD
				, WRT_TANK_LOC
				, SBT_LOC
				, OIL_SAVEFCLTY_LOC
				, SWG_CLUPFCLTY_LOC
				, LIFT_CNT_PSNGR
				, LIFT_CNT_CARGO
				, LIFT_CNT_EMGCY
				, LIFT_OPER_MTHD
				, CLNG_ENNC
				, CLNG_SRC
				, HTNG_ENNC
				, HTNG_SRC
				, SPICTANK_FMT
				, ELCTY_LEAD_IN_CAPA
				, FCG
				, ITR
				, CEIL
				, ROOF
				, ROOF_WTPRF
				, PLAN_CNST_NM
				, PLAN_EXC_CMPNY
				, PLAN_BEGIN_DT
				, PLAN_END_DT
				, CNSTRCT_CNST_NM
				, CNSTRCT_EXC_CMPNY
				, CNSTRCT_BEGIN_DT
				, CNSTRCT_END_DT
				, RM
				, REG_USR
				, REGIST_DT
				, UPD_USR
				, UPDT_DT
				, FCLTS_MNG_NO
				, LOC
				, ARCH_FCLTS_CL_CD
		  FROM 
		  		ARCH_FCLTY_SPEC_F
		 WHERE 
		       FCLTS_MNG_NO = #fcltsMngNo#
  	</select>

  	<insert id="gamConsFcltySpecMngDao.insertFcltyFile">
  		<selectKey keyProperty="maxFcltyFileSeq" resultClass="String">
	       	SELECT LPAD(NVL(MAX(PRT_FCLTY_PHOTO_SEQ),0) + 1,'2','0')
			  FROM PRT_FCLTY_PHOTO_F
			 WHERE GIS_PRT_FCLTY_CD = #gisPrtFcltyCd#
			       AND GIS_PRT_FCLTY_SEQ = #gisPrtFcltySeq#
			       AND GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode#
			       AND GIS_ASSETS_CD = #gisAssetsCd#
			       AND GIS_ASSETS_SUB_CD = #gisAssetsSubCd#
			       AND PRT_FCLTY_SE = #prtFcltySe#
	    </selectKey>
        <![CDATA[
		INSERT
		  INTO PRT_FCLTY_PHOTO_F
		       (
		           GIS_ASSETS_CD ,
		           GIS_ASSETS_PRT_AT_CODE ,
		           GIS_ASSETS_SUB_CD ,
		           GIS_PRT_FCLTY_CD ,
		           GIS_PRT_FCLTY_SEQ ,
		           PRT_FCLTY_PHOTO_SEQ ,
		           PRT_FCLTY_SE ,
		           PHOTO_SJ ,
		           FILENM_PHYSICL ,
		           FILENM_LOGIC ,
		           SHOT_DT ,
		           REG_USR ,
		           REGIST_DT ,
		           PHOTO_DESC
		       )
		       VALUES
		       (
		           #gisAssetsCd# ,
		           #gisAssetsPrtAtCode# ,
		           #gisAssetsSubCd# ,
		           #gisPrtFcltyCd# ,
		           #gisPrtFcltySeq# ,
		           #maxFcltyFileSeq# ,
		           #prtFcltySe# ,
		           #photoSj# ,
		           #filenmPhysicl# ,
		           #filenmLogic# ,
		           #shotDt# ,
		           #regUsr# ,
		           SYSDATE ,
		           #photoDesc#
		        )
        ]]>
    </insert>

  	<update id="gamConsFcltySpecMngDao.updateFcltySpec">
        <![CDATA[
            UPDATE ARCH_FCLTY_SPEC_F
            SET
				BLD_DT = #bldDt#
				,FLAW_END_DT = #flawEndDt#
				,BASE_FMT = #baseFmt#
				,STRCT_FMT = #strctFmt#
				,AR = #ar#
				,ARCH_AR = #archAr#
				,PLOT_AR = #plotAr#
				,MAIN_USAGE_PRPOS = #mainUsagePrpos#
				,PRK_AR = #prkAr#
				,ISD_PRK_AR = #isdPrkAr#
				,OSD_PRK_AR = #osdPrkAr#
				,PRK_CNT = #prkCnt#
				,ISD_PRK_CNT = #isdPrkCnt#
				,OSD_PRK_CNT = #osdPrkCnt#
				,EXHAUST_DUCT_ENNC = #exhaustDuctEnnc#
				,VNTLTN_ARCNDT_MTHD = #vntltnArcndtMthd#
				,WRT_TANK_LOC = #wrtTankLoc#
				,SBT_LOC = #sbtLoc#
				,OIL_SAVEFCLTY_LOC = #oilSavefcltyLoc#
				,SWG_CLUPFCLTY_LOC = #swgClupfcltyLoc#
				,LIFT_CNT_PSNGR = #liftCntPsngr#
				,LIFT_CNT_CARGO = #liftCntCargo#
				,LIFT_CNT_EMGCY = #liftCntEmgcy#
				,LIFT_OPER_MTHD = #liftOperMthd#
				,CLNG_ENNC = #clngEnnc#
				,CLNG_SRC = #clngSrc#
				,HTNG_ENNC = #htngEnnc#
				,HTNG_SRC = #htngSrc#
				,SPICTANK_FMT = #spictankFmt#
				,ELCTY_LEAD_IN_CAPA = #elctyLeadInCapa#
				,FCG = #fcg#
				,ITR = #itr#
				,CEIL = #ceil#
				,ROOF = #roof#
				,ROOF_WTPRF = #roofWtprf#
				,PLAN_CNST_NM = #planCnstNm#
				,PLAN_EXC_CMPNY = #planExcCmpny#
				,PLAN_BEGIN_DT = #planBeginDt#
				,PLAN_END_DT = #planEndDt#
				,CNSTRCT_CNST_NM = #cnstrctCnstNm#
				,CNSTRCT_EXC_CMPNY = #cnstrctExcCmpny#
				,CNSTRCT_BEGIN_DT = #cnstrctBeginDt#
				,CNSTRCT_END_DT = #cnstrctEndDt#
				,RM = #rm#
				,UPD_USR = #updUsr#
				,UPDT_DT = SYSDATE
				,LOC = #loc#
				,ARCH_FCLTS_CL_CD = #archFcltsClCd#
        ]]>

		 WHERE FCLTS_MNG_NO = #fcltsMngNo#
         		
    </update>

  	<delete id="gamConsFcltySpecMngDao.deleteFcltyFile">
        <![CDATA[
            DELETE
			  FROM PRT_FCLTY_PHOTO_F
			 WHERE GIS_ASSETS_CD = #gisAssetsCd#
			       AND GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode#
			       AND GIS_ASSETS_SUB_CD = #gisAssetsSubCd#
			       AND GIS_PRT_FCLTY_CD = #gisPrtFcltyCd#
			       AND GIS_PRT_FCLTY_SEQ = #gisPrtFcltySeq#
			       AND PRT_FCLTY_SE = #prtFcltySe#
        ]]>
        <isNotEmpty property="prtFcltyPhotoSeq">
			AND PRT_FCLTY_PHOTO_SEQ = #prtFcltyPhotoSeq#
	    </isNotEmpty>
    </delete>

  	<update id="gamConsFcltySpecMngDao.updateFcltyFile">
        <![CDATA[
            UPDATE PRT_FCLTY_PHOTO_F
			       SET PHOTO_SJ = #photoSj#,
			       SHOT_DT = #shotDt#,
			       PHOTO_DESC = #photoDesc#
        ]]>
        		<isNotEmpty property="beforeGisAssetsPrtAtCode" prepend=",">
	        		GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode#
        		</isNotEmpty>
        		<isNotEmpty property="beforeGisAssetsCd" prepend=",">
	        		GIS_ASSETS_PRT_AT_CODE = #gisAssetsCd#
        		</isNotEmpty>
        		<isNotEmpty property="beforeGisAssetsSubCd" prepend=",">
	        		GIS_ASSETS_PRT_AT_CODE = #gisAssetsSubCd#
        		</isNotEmpty>
			WHERE 1=1
        		<isNotEmpty property="beforeGisAssetsPrtAtCode" prepend="AND">
			       GIS_ASSETS_PRT_AT_CODE = #beforeGisAssetsPrtAtCode#
        		</isNotEmpty>
        		<isNotEmpty property="beforeGisAssetsCd" prepend="AND">
					GIS_ASSETS_CD = #beforeGisAssetsCd#
        		</isNotEmpty>
        		<isNotEmpty property="beforeGisAssetsSubCd" prepend="AND">
			       GIS_ASSETS_SUB_CD = #beforeGisAssetsSubCd#
        		</isNotEmpty>
        		<isEmpty property="beforeGisAssetsPrtAtCode" prepend="AND">
	        		GIS_ASSETS_PRT_AT_CODE = #gisAssetsPrtAtCode#
        		</isEmpty>
        		<isEmpty property="beforeGisAssetsCd" prepend="AND">
	        		GIS_ASSETS_PRT_AT_CODE = #gisAssetsCd#
        		</isEmpty>
        		<isEmpty property="beforeGisAssetsSubCd" prepend="AND">
	        		GIS_ASSETS_PRT_AT_CODE = #gisAssetsSubCd#
        		</isEmpty>
			       AND GIS_PRT_FCLTY_CD = #gisPrtFcltyCd#
			       AND GIS_PRT_FCLTY_SEQ = #gisPrtFcltySeq#
			       AND PRT_FCLTY_PHOTO_SEQ = #prtFcltyPhotoSeq#
			       AND PRT_FCLTY_SE = #prtFcltySe#
    </update>


    <delete id="gamConsFcltySpecMngDao.deleteFcltySpec">
        <![CDATA[
			DELETE
			  	FROM ARCH_FCLTY_SPEC_F
			 WHERE FCLTS_MNG_NO = #fcltsMngNo#
        ]]>
    </delete>

      <select id="gamConsFcltySpecMngDao.selectFcltyPhotoMaxSeq" resultClass="Integer">
    	SELECT LPAD(NVL(MAX(PRT_FCLTY_PHOTO_SEQ),0) + 1,'2','0') PRT_FCLTY_PHOTO_SEQ
  			FROM PRT_FCLTY_PHOTO_F
    </select>
    
    
    <select id="gamConsFcltySpecMngDao.selectFcltyinfo9List" parameterClass="gamConsFcltySpecMngVO" resultClass="egovMap">
		SELECT *
		  FROM
		       (SELECT Z.*,
		              ROWNUM AS RNUM
		         FROM
		              (SELECT 
		              		BOUND
		              		, STRY_SE
		              		, AR
		              		, WALL_FNSH
		              		, FLR_FNSH
		              		, CEIL
		              		, USAGE_PRPOS
		              		, RM
		              		, REG_USR
		              		, TO_CHAR(REGIST_DT,'YYYY-MM-DD') AS REGIST_DT
		              		, UPD_USR
		              		, FCLTS_MNG_NO
		              		, TO_CHAR(UPDT_DT,'YYYY-MM-DD') AS UPDT_DT
		                FROM 
		                	ARCH_FCLTY_FLOOR_SPEC_F
		                WHERE 
		                	FCLTS_MNG_NO = #fcltsMngNo#
		              )Z
		       )
	     <![CDATA[ WHERE ROWNUM <= #recordCountPerPage# and RNUM > #firstIndex# ]]>
    </select>

    <select id="gamConsFcltySpecMngDao.selectFcltyinfo9ListTotCnt" parameterClass="gamConsFcltySpecMngVO" resultClass="int">
            SELECT 
            	COUNT(*) totcnt
             FROM 
             	ARCH_FCLTY_FLOOR_SPEC_F
             WHERE 
             	FCLTS_MNG_NO = #fcltsMngNo#
    </select>

</sqlMap>